<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8">
<title>标签: Android - 欧阳锋工作室</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />



    <meta name="description" content="关注欧阳锋工作室，你想知道的都在这里~">
<meta property="og:type" content="website">
<meta property="og:title" content="欧阳锋工作室">
<meta property="og:url" content="http://youngfeng.com/tags/Android/index.html">
<meta property="og:site_name" content="欧阳锋工作室">
<meta property="og:description" content="关注欧阳锋工作室，你想知道的都在这里~">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://youngfeng.com/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="欧阳锋工作室">
<meta name="twitter:description" content="关注欧阳锋工作室，你想知道的都在这里~">
<meta name="twitter:image" content="http://youngfeng.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="欧阳锋工作室" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">首页</a>
                
                <a class="navbar-item"
                href="/archives">时间旅行</a>
                
                <a class="navbar-item"
                href="/categories">分类</a>
                
                <a class="navbar-item"
                href="/tags">标签</a>
                
                <a class="navbar-item"
                href="/about">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/yuanhoujun">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/tags">标签</a></li>
            <li class="is-active"><a href="#" aria-current="page">Android</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-07-09T07:02:00.000Z">2018-07-09</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 878 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/07/09/kotlin/2018最新Kotlin基础视频教程上线了/">2018最新Kotlin基础视频教程上线了</a>
            
        </h1>
        <div class="content">
            <p>从5月份开始制作这个视频，历时两个多月，终于在网易云课堂与大家见面了…</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/7/9/1647d0644608714d" alt=""></p>
<h3 id="视频特色"><a href="#视频特色" class="headerlink" title="视频特色"></a>视频特色</h3><ul>
<li>在前期课程中，使用普通编辑器进行编码，治疗你的IDE依赖症</li>
<li>所有课程均使用live coding的方式授课，保持与你的频率一致</li>
<li>每节课程课后都准备了相应的习题供大家巩固练习</li>
<li>课程覆盖面广，线下效果持续跟踪</li>
<li>项目实战部分是一个非常有意思的小项目，使用控制台完成类QQ聊天室功能（支持文字消息、文件发送、文件下载等功能）</li>
</ul>
<h3 id="课程目录"><a href="#课程目录" class="headerlink" title="课程目录"></a>课程目录</h3><ul>
<li>Kotlin基础环境配置、变量与空值安全</li>
<li>一等公民函数基础语法</li>
<li>高阶函数、lambda表达式与匿名函数</li>
<li>面向对象知识点（类、接口、继承、扩展等）</li>
<li>Kotlin语言中多样的class类型、对象以及枚举</li>
<li>强大的集合与控制流处理</li>
<li>操作符重载</li>
<li>更安全的泛型处理</li>
<li>代理模式及其应用</li>
<li>协程简介</li>
<li>析构、注解与异常处理</li>
<li>Kotlin与Java互通的那些事儿</li>
<li>控制台版本QQ聊天室项目实战</li>
</ul>
<h3 id="一些感想"><a href="#一些感想" class="headerlink" title="一些感想"></a>一些感想</h3><p>这是我第一次真正尝试录制视频教程，种种原因，导致整个视频的录制、剪辑加发布审核一共花掉了两个多月，将近三个月。而且还是离职在家，全职的情况下。</p>
<p>即便如此，事实上，这个视频依然没有达到我的要求。但我想，第一次永远是青涩的，想要一步到位永远不过是痴人说梦。我坚信下一个视频我会做的更好。因此，也希望大家对这个视频提出宝贵的意见。</p>
<h3 id="视频介绍看这里"><a href="#视频介绍看这里" class="headerlink" title="视频介绍看这里"></a>视频介绍看这里</h3><p>在Kotlin交流群中，不少同学希望我能够出露脸视频。为了满足大家的愿望，我在课程的开始部分录制了一段真人解说视频。如果你不想看文字介绍的话，请移步到这里：<a href="http://study.163.com/course/courseLearn.htm?courseId=1005686004&amp;share=2&amp;shareId=400000000535034#/learn/video?lessonId=1052950023&amp;courseId=1005686004" target="_blank" rel="noopener">http://study.163.com/course/courseLearn.htm?courseId=1005686004&amp;share=2&amp;shareId=400000000535034#/learn/video?lessonId=1052950023&amp;courseId=1005686004</a></p>
<h3 id="如何观看这个视频教程"><a href="#如何观看这个视频教程" class="headerlink" title="如何观看这个视频教程"></a>如何观看这个视频教程</h3><p>目前，该视频教程仅上线了网易云课堂，同学们可以移步至这里观看：<a href="http://study.163.com/course/introduction.htm?courseId=1005686004&amp;share=2&amp;shareId=400000000535034" target="_blank" rel="noopener">http://study.163.com/course/introduction.htm?courseId=1005686004&amp;share=2&amp;shareId=400000000535034</a></p>
<h3 id="课程问题解惑"><a href="#课程问题解惑" class="headerlink" title="课程问题解惑"></a>课程问题解惑</h3><p>如果你在使用Kotlin视频教程的时候遇到了任何问题，欢迎来我的Kotlin语言交流群里面提问。只要是关于视频课程的内容，一定有问必答。如果你没有购买这个视频教程，也可以添加这个QQ交流群，群里的小伙伴都非常热情。如果遇到了Kotlin语言问题，也可以在群里提问，同样会有问必答。</p>
<h3 id="视频课程资料"><a href="#视频课程资料" class="headerlink" title="视频课程资料"></a>视频课程资料</h3><p>课程源码：<a href="https://github.com/yuanhoujun/kotlin-video-tutorial" target="_blank" rel="noopener">https://github.com/yuanhoujun/kotlin-video-tutorial</a></p>
<p>习题答案：关注微信公众号【欧阳锋工作室】，回复“Kotlin视频教程”索取</p>
<h3 id="Kotlin语言交流群"><a href="#Kotlin语言交流群" class="headerlink" title="Kotlin语言交流群"></a>Kotlin语言交流群</h3><p> 唯一官方Kotlin语言交流群：329673958，期待您的加入。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-03-06T01:57:00.000Z">2018-03-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/开源/">开源</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 分钟 读完 (大约 1012 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/03/06/open source/Android两行代码实现仿微信滑动返回效果/">Android两行代码实现仿微信滑动返回效果</a>
            
        </h1>
        <div class="content">
            <p><img src="http://upload-images.jianshu.io/upload_images/703764-017d5942c296de5b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<blockquote>
<p>iPhone滑动关闭页面是一个非常讨喜的设计。滑动关闭可以让你聚焦屏幕内容，而不需要因为返回突然切换思维到屏幕下方寻找返回按钮。事实上，在使用Android手机的时候，我经常这样做。原因是，Android不同机型的返回按钮位置不一样。以至于在更换机型后我常常找不到返回按钮，需要一段时间的适应期。而滑动关闭就可以有效地避免这个问题，目前已经有很多类型的Android应用开始支持滑动关闭，比如你熟悉的微信、快手等都已经支持了滑动返回效果。使用 <a href="https://github.com/yuanhoujun/Android_Slide_To_Close" target="_blank" rel="noopener">Snake</a> 框架你只需要两行代码就可以搞定滑动关闭集成…</p>
</blockquote>
<p>如果你还不知道Snake是什么，请关注简书下面的文章：</p>
<ul>
<li><a href="https://www.jianshu.com/p/3619d65739b4" target="_blank" rel="noopener">Snake 让你轻松实现类似iOS滑动关闭功能</a></li>
<li><a href="https://www.jianshu.com/p/f7d5e422fa79" target="_blank" rel="noopener">Snake版本升级到0.0.5啦</a></li>
<li><a href="https://www.jianshu.com/p/7cf6864c9bde" target="_blank" rel="noopener">将滑动关闭进行到底</a></li>
<li><a href="https://www.jianshu.com/p/71c27a671500" target="_blank" rel="noopener">Snake版本再升级，支持类iPhone X上滑退出到桌面功能</a></li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-44c47eb5362b573c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Snake"></p>
<h2 id="初体验"><a href="#初体验" class="headerlink" title="初体验"></a>初体验</h2><p>如果你需要在Activity中实现滑动关闭效果，使用如下两个步骤即可：</p>
<ul>
<li>在你的Application中对Snake进行初始化：<code>Snake.init(this)</code></li>
<li>在你的Activity类的onCreate方法中对其进行托管：<code>Snake.host(this)</code></li>
</ul>
<p>以上两个方法已经完成了Activity滑动关闭集成，为了开启滑动关闭功能，你还需要在Activity类顶部添加<code>@EnableDragToClose</code>注解</p>
<h2 id="Snake设计思路"><a href="#Snake设计思路" class="headerlink" title="Snake设计思路"></a>Snake设计思路</h2><p>为了保证Snake框架尽可能灵活，我使用了注解实现单页固定滑动参数配置。而全局配置则使用单独的<strong>snake.xml</strong>文件进行配置。同时，为了支持动态关闭和开启，在Snake类中提供了相关API用于动态控制滑动关闭和开启。</p>
<h2 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h2><p>看过Snake官方文档的同学会发现，Snake并不提供左滑关闭或者其它方向关闭页面的设置，Snake也没有提供不同的关闭效果设置。没有这样设计的原因很简单，因为这种关闭效果并不常见，这样的设计不过是哗众取宠，浪费时间，且增加使用难度。</p>
<p>我的目标是：尽可能简化Snake设计，仅提供必要API，且专注于滑动关闭效果实现。</p>
<h2 id="新版本来了"><a href="#新版本来了" class="headerlink" title="新版本来了"></a>新版本来了</h2><p>这是本篇文章的重点，昨天，<a href="https://github.com/yuanhoujun/Android_Slide_To_Close/blob/develop/docs/update_log_0.3.0.md" target="_blank" rel="noopener">Snake 0.3.0</a> 版本已经发布了。</p>
<p>0.3.0版本主要针对Fragment提供了继承方式集成：</p>
<h5 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h5><p>按照下面的对应关系，改变你的Fragment父类就可以完成滑动关闭集成:</p>
<ul>
<li><code>android.app.Fragment</code> =&gt; <code>com.youngfeng.snake.app.Fragment</code></li>
<li><code>android.support.v4.app.Fragment</code> =&gt; <code>com.youngfeng.snake.support.v4.app.Fragment</code></li>
</ul>
<p><strong>注意：使用继承方式集成的情况下，原来的API完全可以通用。你可以选择使用Snake的API进行滑动控制，也可以使用父类中的方法进行滑动控制，这取决于你自己。甚至实例创建你依然可以交给newProxy/newProxySupport接口。</strong></p>
<p>详细信息，请查看官方文档：<a href="https://github.com/yuanhoujun/Android_Slide_To_Close" target="_blank" rel="noopener">https://github.com/yuanhoujun/Android_Slide_To_Close</a></p>
<h2 id="交流群"><a href="#交流群" class="headerlink" title="交流群"></a>交流群</h2><p>QQ群：288177681<br>如果你在使用Snake的过程中，遇到任何问题，请使用QQ群联系我。</p>
<hr>
<p>我是 <a href="https://www.jianshu.com/p/0c5d14fbaf1a" target="_blank" rel="noopener">欧阳锋</a>，开源的道路上，我与你同行。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-06T03:39:00.000Z">2018-02-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    24 分钟 读完 (大约 3662 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/06/kotlin/操作符重载及中缀调用/">Kotlin 操作符重载及中缀调用</a>
            
        </h1>
        <div class="content">
            <p><img src="http://upload-images.jianshu.io/upload_images/703764-0baf2dcfb0baa84f.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<blockquote>
<p>操作符重载其实很有意思！但这个概念却很少有人知道，使用操作符重载在某种程度上会给代码的阅读带来一定的麻烦。因此，慎用操作符被认为是一个好习惯。的确，操作符重载是一把双刃剑，既能削铁如泥，也能“引火烧身”，这篇文章将从实用的角度来讲解操作符重载的基本用法。</p>
</blockquote>
<h1 id="支持重载的操作符类型"><a href="#支持重载的操作符类型" class="headerlink" title="支持重载的操作符类型"></a>支持重载的操作符类型</h1><p>Kotlin语言支持重载的操作符类型比较多。以最新版本<strong>1.2.21</strong>为准，目前支持重载的操作符可以归纳为以下几类：</p>
<h1 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h1><h4 id="一元前缀操作符"><a href="#一元前缀操作符" class="headerlink" title="一元前缀操作符"></a>一元前缀操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+a</td>
<td style="text-align:center">a.unaryPlus()</td>
</tr>
<tr>
<td style="text-align:center">-a</td>
<td style="text-align:center">a.unaryMinus()</td>
</tr>
<tr>
<td style="text-align:center">!a</td>
<td style="text-align:center">a.not()</td>
</tr>
</tbody>
</table>
<p>以上三个操作符在日常使用中频率很高，第一个操作符在基本运算中很少使用，第二个操作符就是常见的取反操作，第三个操作符是逻辑取反操作。接下来，我们使用扩展的方式重载这三个操作符：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 一元操作符</span><br><span class="line"> *</span><br><span class="line"> * @author Scott Smith 2018-02-03 14:11</span><br><span class="line"> */</span><br><span class="line">data class Number(var value: Int)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 重载一元操作符+，使其对Number中实际数据取绝对值</span><br><span class="line"> */</span><br><span class="line">operator fun Number.unaryPlus(): Number &#123;</span><br><span class="line">    this.value = Math.abs(value)</span><br><span class="line">    return this</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 重载一元操作符-，使其对Number中实际数据取反</span><br><span class="line"> */</span><br><span class="line">operator fun Number.unaryMinus(): Number &#123;</span><br><span class="line">    this.value = -value</span><br><span class="line">    return this</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 这个操作符通常是用于逻辑取反，这里用一个没有意义的操作，来模拟重载这个操作符</span><br><span class="line"> * 结果：始终返回Number中实际数据的负值</span><br><span class="line"> */</span><br><span class="line">operator fun Number.not(): Number &#123;</span><br><span class="line">    this.value = -Math.abs(value)</span><br><span class="line">    return this</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val number = Number(-3)</span><br><span class="line">    println(&quot;Number value = $&#123;number.value&#125;&quot;)</span><br><span class="line">    println(&quot;After unaryPlus: Number value = $&#123;(+number).value&#125;&quot;)</span><br><span class="line">    println(&quot;After unaryMinus: Number value = $&#123;(-number).value&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    number.value = Math.abs(number.value)</span><br><span class="line">    println(&quot;After unaryNot: Number value = $&#123;(!number).value&#125;&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行上述代码，将得到如下结果：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Number value = -3</span><br><span class="line">After unaryPlus: Number value = 3</span><br><span class="line">After unaryMinus: Number value = -3</span><br><span class="line">After unaryNot: Number value = -3</span><br></pre></td></tr></table></figure></p>
<h4 id="自增和自减操作符"><a href="#自增和自减操作符" class="headerlink" title="自增和自减操作符"></a>自增和自减操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a++/++a</td>
<td style="text-align:center">a.inc()</td>
</tr>
<tr>
<td style="text-align:center">a–/–a</td>
<td style="text-align:center">a.dec()</td>
</tr>
</tbody>
</table>
<p>重载这个操作符相对比较难理解，官方文档有一段简短的文字解释，翻译成代码可以这样表示：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// a++</span><br><span class="line">fun increment(a: Int): Int &#123;</span><br><span class="line">  val a0 = a</span><br><span class="line">  a = a + 1</span><br><span class="line">  return a0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ++a</span><br><span class="line">fun increment(a: Int): Int &#123;</span><br><span class="line">  a = a + 1</span><br><span class="line">  return a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>看懂上面的代码后，我们换成需要重载的<code>Number</code>类，Kotlin最终会这样处理：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Number++</span><br><span class="line">fun increment(number: Number): Number &#123;</span><br><span class="line">  val temp = number</span><br><span class="line">  val result = number.inc()</span><br><span class="line">  return result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Number++</span><br><span class="line">fun increment(number: Number): Number &#123;</span><br><span class="line">  return number.inc()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>因此，重载<code>Number</code>类自加操作符，我们可以这样做：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">operator fun Number.inc(): Number &#123;</span><br><span class="line">    return Number(this.value + 1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>重载自减操作符同理，完整代码请参考我的Git版本库：<a href="https://github.com/yuanhoujun/kotlin-samples" target="_blank" rel="noopener">kotlin-samples</a></p>
<h1 id="二元操作符"><a href="#二元操作符" class="headerlink" title="二元操作符"></a>二元操作符</h1><h4 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a + b</td>
<td style="text-align:center">a.plus(b)</td>
</tr>
<tr>
<td style="text-align:center">a - b</td>
<td style="text-align:center">a.minus(b)</td>
</tr>
<tr>
<td style="text-align:center">a * b</td>
<td style="text-align:center">a.times(b)</td>
</tr>
<tr>
<td style="text-align:center">a / b</td>
<td style="text-align:center">a.div(b)</td>
</tr>
<tr>
<td style="text-align:center">a % b</td>
<td style="text-align:center">a.rem(b)</td>
</tr>
<tr>
<td style="text-align:center">a..b</td>
<td style="text-align:center">a.rangeTo(b)</td>
</tr>
</tbody>
</table>
<p>前5个操作符相对比较好理解，我们以<code>a + b</code>为例，举个一个简单的例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 重载Number类的加法运算符</span><br><span class="line">operator fun Number.plus(value: Int): Number &#123;</span><br><span class="line">    return Number(this.value + value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">       println((Number(1) + 2))</span><br><span class="line">&#125;</span><br><span class="line">// 输出结果：</span><br><span class="line">Number value = 3</span><br></pre></td></tr></table></figure></p>
<p>相对比较难理解的是第六个范围运算符，这个操作符主要用于生成一段数据范围。我们认为<code>Number</code>本身就代表一个整型数字，因此，重载<code>Number</code>是一件有意义的事情。直接看例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">operator fun Number.rangeTo(to: Number): IntRange &#123;</span><br><span class="line">    return this.value..to.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val startNumber = Number(3)</span><br><span class="line">    val endNumber = Number(9)</span><br><span class="line"></span><br><span class="line">    (startNumber..endNumber).forEach &#123;</span><br><span class="line">        println(&quot;value = $it&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 运行结果：</span><br><span class="line">value = 3</span><br><span class="line">value = 4</span><br><span class="line">value = 5</span><br><span class="line">value = 6</span><br><span class="line">value = 7</span><br><span class="line">value = 8</span><br><span class="line">value = 9</span><br></pre></td></tr></table></figure></p>
<h4 id="“In”运算符"><a href="#“In”运算符" class="headerlink" title="“In”运算符"></a>“In”运算符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a in b</td>
<td style="text-align:center">b.contains(a)</td>
</tr>
<tr>
<td style="text-align:center">a !in b</td>
<td style="text-align:center">!b.contains(a)</td>
</tr>
</tbody>
</table>
<p>这个操作符相对比较好理解，重载这个操作符可以用于判断某个数据是否在另外一个对象中。我们用一个非常简单的自定义类来模拟集合操作：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class IntCollection &#123; </span><br><span class="line">    val intList = ArrayList&lt;Int&gt;()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 重载&quot;in&quot;操作符</span><br><span class="line">operator fun IntCollection.contains(value: Int): Boolean &#123;</span><br><span class="line">    return this.intList.contains(value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val intCollection = IntCollection()</span><br><span class="line">    intCollection.add(1, 2, 3)</span><br><span class="line">    println(3 in intCollection)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出结果：</span><br><span class="line">true</span><br></pre></td></tr></table></figure></p>
<h4 id="索引访问运算符"><a href="#索引访问运算符" class="headerlink" title="索引访问运算符"></a>索引访问运算符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a[i]</td>
<td style="text-align:center">a.get(i)</td>
</tr>
<tr>
<td style="text-align:center">a[i, j]</td>
<td style="text-align:center">a.get(i, j)</td>
</tr>
<tr>
<td style="text-align:center">a[i_1, …, i_n]</td>
<td style="text-align:center">a.get(i_1, …, i_n)</td>
</tr>
<tr>
<td style="text-align:center">a[i] = b</td>
<td style="text-align:center">a.set(i, b)</td>
</tr>
<tr>
<td style="text-align:center">a[i, j] = b</td>
<td style="text-align:center">a.set(i, j, b)</td>
</tr>
<tr>
<td style="text-align:center">a[i_1, …, i_n] = b</td>
<td style="text-align:center">a.set(i_1, …, i_n, b)</td>
</tr>
</tbody>
</table>
<p>这个操作符很有意思，例如，如果你要访问Map中某个数据，通常是这样的<code>map.get(&quot;key&quot;)</code>，使用索引运算符你还可以这样操作：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val value = map[&quot;key&quot;]</span><br></pre></td></tr></table></figure></p>
<p>我们继续以<code>IntCollection</code>类为例，尝试重写<code>a[i]</code>和<code>a[i] = b</code>两个运算符，其它运算符同理。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 重载a[i]操作符</span><br><span class="line">operator fun IntCollection.get(index: Int): Int &#123;</span><br><span class="line">    return intList[index]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 重载a[i] = b操作符</span><br><span class="line">operator fun IntCollection.set(index: Int, value: Int) &#123;</span><br><span class="line">    intList[index] = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val intCollection = IntCollection()</span><br><span class="line">    intCollection.add(1, 2, 3)</span><br><span class="line">    println(intCollection[0])</span><br><span class="line"></span><br><span class="line">    intCollection[2] = 4</span><br><span class="line">    print(intCollection[2])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，我们用索引运算符来做一点更有意思的事情！新建一个普通的<code>Kotlin</code>类<code>User</code>：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class User(var name: String,</span><br><span class="line">           var age: Int) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用下面的方式重载索引运算符：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">operator fun User.get(key: String): Any? &#123;</span><br><span class="line">    when(key) &#123;</span><br><span class="line">        &quot;name&quot; -&gt; &#123;</span><br><span class="line">            return this.name</span><br><span class="line">        &#125;</span><br><span class="line">        &quot;age&quot; -&gt; &#123;</span><br><span class="line">            return this.age</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">operator fun User.set(key: String, value:Any?) &#123;</span><br><span class="line">    when(key) &#123;</span><br><span class="line">        &quot;name&quot; -&gt; &#123;</span><br><span class="line">            name = value as? String</span><br><span class="line">        &#125;</span><br><span class="line">        &quot;age&quot; -&gt; &#123;</span><br><span class="line">            age = value as? Int</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，你会神奇地发现，一个普通的<code>Kotlin</code>类居然也可以使用索引运算符对成员变量进行操作了，是不是很神奇？<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val user = User(&quot;Scott Smith&quot;, 18)</span><br><span class="line">    println(user[&quot;name&quot;])</span><br><span class="line">    user[&quot;age&quot;] = 22</span><br><span class="line">    println(user[&quot;age&quot;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>因此，索引运算符不仅仅可以对集合类数据进行操作，对一个普通的<code>Kotlin</code>类也可以发挥同样的作用。如果你脑洞足够大，你还可以发现更多更神奇的玩法。</p>
<h4 id="调用操作符"><a href="#调用操作符" class="headerlink" title="调用操作符"></a>调用操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a()</td>
<td style="text-align:center">a.invoke()</td>
</tr>
<tr>
<td style="text-align:center">a(i)</td>
<td style="text-align:center">a.invoke(i)</td>
</tr>
<tr>
<td style="text-align:center">a(i, j)</td>
<td style="text-align:center">a.invoke(i, j)</td>
</tr>
<tr>
<td style="text-align:center">a(i_1, ……, i_n)</td>
<td style="text-align:center">a.invoke(i_1, ……, i_n)</td>
</tr>
</tbody>
</table>
<p>重载这个操作符并不难，理解它的应用场景却有一定的难度。为了理解它的应用场景，我们来举一个简单的例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class JsonParser &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">operator fun JsonParser.invoke(json: String): Map&lt;String, Any&gt; &#123;</span><br><span class="line">    val map = Json.parse(json)</span><br><span class="line">    ...</span><br><span class="line">    return map</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 可以这样调用</span><br><span class="line">val parser = JsonParser()</span><br><span class="line">val map = parser(&quot;&#123;name: \&quot;Scott Smith\&quot;&#125;&quot;)</span><br></pre></td></tr></table></figure></p>
<p>这里的调用有点像省略了一个解析Json数据的方法，难道它仅仅就是这个作用吗？是的，调用操作符其实就这一个作用。如果一个Kotlin类仅仅只有一个方法，直接使用括号调用的确是一个不错的主意。不过，在使用的时候还是要稍微注意一下，避免出现歧义。</p>
<h4 id="广义赋值操作符"><a href="#广义赋值操作符" class="headerlink" title="广义赋值操作符"></a>广义赋值操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a += b</td>
<td style="text-align:center">a.plusAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a -= b</td>
<td style="text-align:center">a.minusAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a *= b</td>
<td style="text-align:center">a.timesAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a /= b</td>
<td style="text-align:center">a.divAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a %= b</td>
<td style="text-align:center">a.remAssign(b)</td>
</tr>
</tbody>
</table>
<p>这个操作符相对比较好理解，我们以<code>Number</code>类为例，举一个简单的例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 广义赋值运算符</span><br><span class="line">operator fun Number.plusAssign(value: Int) &#123;</span><br><span class="line">    this.value += value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val number = Number(1)</span><br><span class="line">    number += 2</span><br><span class="line">    println(number)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出结果：</span><br><span class="line">Number value = 3</span><br></pre></td></tr></table></figure></p>
<h4 id="相等与不等操作符"><a href="#相等与不等操作符" class="headerlink" title="相等与不等操作符"></a>相等与不等操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a == b</td>
<td style="text-align:center">a?.equals(b) ?: (b === null)</td>
</tr>
<tr>
<td style="text-align:center">a != b</td>
<td style="text-align:center">!(a?.equals(b) ?: (b === null))</td>
</tr>
</tbody>
</table>
<p>重载这个操作符与Java重写equals方法是一样的。不过，这里要注意与Java的区别，在Java端<code>==</code>用于判断两个对象是否是同一对象（指针级别）。而在Kotlin语言中，如果我们不做任何处理，<code>==</code>等同于使用Java对象的<code>equals</code>方法判断两个对象是否相等。</p>
<p>另外，这里还有一种特殊情况，如果左值等于null，这个时候<code>a?.equals(b)</code>将返回null值。因此，这里还增加了<code>?:</code>运算符用于进一步判断，在这个情况下，当且仅当b === null的时候，a、b才有可能相等。因此，才有了上面的对应关系，这里以<code>User</code>类为例举一个简单的例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class User(var name: String?,</span><br><span class="line">           var age: Int?) &#123;</span><br><span class="line"></span><br><span class="line">    operator override fun equals(other: Any?): Boolean &#123;</span><br><span class="line">        if(other is User) &#123;</span><br><span class="line">            return (this.name == other.name) &amp;&amp; (this.age == other.age)</span><br><span class="line">        &#125;</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：这里有一个特殊的地方，与其它操作符不一样的地方是，如果使用扩展的方式尝试重载该操作符，将会报错。因此，如果要重载该操作符，一定要在类中进行重写。</p>
<h4 id="比较操作符"><a href="#比较操作符" class="headerlink" title="比较操作符"></a>比较操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a &gt; b</td>
<td style="text-align:center">a.compareTo(b) &gt; 0</td>
</tr>
<tr>
<td style="text-align:center">a &lt; b</td>
<td style="text-align:center">a.compareTo(b) &lt; 0</td>
</tr>
<tr>
<td style="text-align:center">a &gt;= b</td>
<td style="text-align:center">a.compareTo(b) &gt;= 0</td>
</tr>
<tr>
<td style="text-align:center">a &lt;= b</td>
<td style="text-align:center">a.compareTo(b) &lt;= 0</td>
</tr>
</tbody>
</table>
<p>比较操作符是一个在日常使用中频率非常高的操作符，重载这个操作符只需要掌握以上表格中几个规则即可。我们以<code>Number</code>类为例举一个简单的例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">operator fun Number.compareTo(number: Number): Int &#123;</span><br><span class="line">    return this.value - number.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="属性委托操作符"><a href="#属性委托操作符" class="headerlink" title="属性委托操作符"></a>属性委托操作符</h4><p><strong>属性委托操作符</strong>是一种非常特殊的操作符，其主要用在代理属性中。关于Kotlin代理的知识，如果你还不了解的话，请参考这篇文章<br> <a href="https://www.jianshu.com/p/54a57aac11e6" target="_blank" rel="noopener">Delegation</a>。这篇文章介绍的相对简略，后面会出一篇更详细的文章介绍代理相关的知识。</p>
<h4 id="中缀调用"><a href="#中缀调用" class="headerlink" title="中缀调用"></a>中缀调用</h4><p>看到这里，可能有一些追求更高级玩法的同学会问：Kotlin支持自定义操作符吗？</p>
<p>答案当然是：不能！不过，别失望，<code>infix</code>也许适合你，它其实可以看做一种自定义操作符的实现。这里我们对集合<code>List</code>新增一个扩展方法<code>intersection</code>用于获取两个集合的交集：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 获取两个集合的交集</span><br><span class="line">fun &lt;E&gt; List&lt;E&gt;.interSection(other: List&lt;E&gt;): List&lt;E&gt; &#123;</span><br><span class="line">    val result = ArrayList&lt;E&gt;()</span><br><span class="line">    forEach &#123;</span><br><span class="line">        if(other.contains(it)) &#123;</span><br><span class="line">            result.add(it)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，我们就可以在<code>List</code>及其子类中使用点语法调用了。但，它看起来仍然不像一个操作符。为了让它更像一个操作符，我们继续做点事情：</p>
<ul>
<li>添加<code>infix</code>关键词</li>
<li>将函数名修改为∩（这是数学上获取交集的标记符号）<br>然而，万万没想到，修改完成后居然报错了。Kotlin并不允许直接使用特殊符号作为函数名开头。因此，我们取形近的字母<code>n</code>用于表示函数名：<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 获取两个集合的交集</span><br><span class="line">infix fun &lt;E&gt; List&lt;E&gt;.n(other: List&lt;E&gt;): List&lt;E&gt; &#123;</span><br><span class="line">    val result = ArrayList&lt;E&gt;()</span><br><span class="line">    forEach &#123;</span><br><span class="line">        if(other.contains(it)) &#123;</span><br><span class="line">            result.add(it)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>接下来，我们就可以这样调用了<code>val interSection = list1 n list2</code>，怎么样？是不是很像自定义了一个获取交集的操作符<code>n</code>？如果你希望自定义操作符，可以尝试这么做。</p>
<p>其实<code>infix</code>的应用场景还不止这些，接下来，我们再用它完成一件更有意思的事情。</p>
<p>在实际项目开发中，数据库数据到对象的处理是一件繁琐的过程，最麻烦的地方莫过于思维的转换。那我们是否可以在代码中直接使用SQL语句查询对象数据呢？例如这样：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val users = Select * from User where age &gt; 18</span><br></pre></td></tr></table></figure></p>
<p>纸上学来终觉浅，觉知此事需躬行。有了这个idea，接下来，我们就朝着这个目标努力。<br>一、先声明一个<code>Sql</code>类，准备如下方法：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">infix fun select(columnBuilder: ColumnBuilder): Sql &#123;</span><br><span class="line"></span><br><span class="line">infix fun from(entityClass: Class&lt;*&gt;): Sql </span><br><span class="line"></span><br><span class="line">infix fun where(condition: String): Sql </span><br><span class="line"></span><br><span class="line">fun &lt;T&gt; query(): T</span><br></pre></td></tr></table></figure></p>
<p>二、我们的目的是：最终转换到SQL语句形式。因此，增加如下实现：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">class ColumnBuilder(var columns: Array&lt;out String&gt;) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Sql private constructor() &#123;</span><br><span class="line">    var columns = emptyList&lt;String&gt;()</span><br><span class="line">    var entityClass: Class&lt;*&gt;? = null</span><br><span class="line">    var condition: String? = null</span><br><span class="line"></span><br><span class="line">    companion object &#123;</span><br><span class="line">        fun get(): Sql &#123;</span><br><span class="line">            return Sql()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    infix fun select(columnBuilder: ColumnBuilder): Sql &#123;</span><br><span class="line">        this.columns = columnBuilder.columns.asList()</span><br><span class="line">        return this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    infix fun from(entityClass: Class&lt;*&gt;): Sql &#123;</span><br><span class="line">        this.entityClass = entityClass</span><br><span class="line">        return this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    infix fun where(condition: String): Sql &#123;</span><br><span class="line">        this.condition = condition</span><br><span class="line">        return this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun &lt;T&gt; query(): T &#123;</span><br><span class="line">        // 此处省略所有条件判断</span><br><span class="line">        val sqlBuilder = StringBuilder(&quot;select &quot;)</span><br><span class="line"></span><br><span class="line">        val columnBuilder = StringBuilder(&quot;&quot;)</span><br><span class="line">        if(columns.size == 1 &amp;&amp; columns[0] == &quot;*&quot;) &#123;</span><br><span class="line">            columnBuilder.append(&quot;*&quot;)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            columns.forEach &#123;</span><br><span class="line">                columnBuilder.append(it).append(&quot;,&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">            columnBuilder.delete(columns.size - 1, columns.size)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        val sql = sqlBuilder.append(columnBuilder.toString())</span><br><span class="line">                            .append(&quot; from $&#123;entityClass?.simpleName&#125; where &quot;)</span><br><span class="line">                            .append(condition)</span><br><span class="line">                            .toString()</span><br><span class="line">        println(&quot;执行SQL查询：$sql&quot;)</span><br><span class="line"></span><br><span class="line">        return execute(sql)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun &lt;T&gt; execute(sql: String): T &#123;</span><br><span class="line">        // 仅仅用于测试</span><br><span class="line">        return Any() as T</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>三、为了看起来更形似，再增加如下两个方法：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 使其看起来像在数据库作用域中执行</span><br><span class="line">fun database(init: Sql.()-&gt;Unit) &#123;</span><br><span class="line">    init.invoke(Sql.get())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 因为infix限制，参数不能直接使用可变参数。因此，我们增加这个方法使参数组装看起来更自然</span><br><span class="line">fun columns(vararg columns: String): ColumnBuilder &#123;</span><br><span class="line">    return ColumnBuilder(columns)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，就是见证奇迹的时刻！<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    database &#123;</span><br><span class="line">        (select (columns(&quot;*&quot;)) from User::class.java where &quot;age &gt; 18&quot;).query()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出结果：</span><br><span class="line">执行SQL查询：select * from User where age &gt; 18</span><br></pre></td></tr></table></figure></p>
<p>为了方便大家查看，我们提取完整执行代码段与SQL语句对比：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select          *       from User             where  age &gt; 18</span><br><span class="line">select  (columns(&quot;*&quot;))  from User::class.java where &quot;age &gt; 18&quot;</span><br></pre></td></tr></table></figure></p>
<p>神奇吗？<br>至此，我们就可以直接在代码中愉快地使用类似SQL语句的方式进行方法调用了。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本篇文章从操作符重载实用的角度讲解了操作符重载的所有相关知识。如文章开头所说，操作符重载是一把双刃剑。用得好事半功倍，用不好事倍功半。因此，我给大家的建议是：使用的时候一定要保证能够自圆其说，简单来说，就是自然。我认为相对于古老的语言C++来说，Kotlin语言操作符重载的设计是非常棒的。如果你知道自己在做什么，我非常推荐你在生产环境中使用操作符重载来简化操作。</p>
<p>本篇文章例子代码点这里：<a href="https://github.com/yuanhoujun/kotlin-samples" target="_blank" rel="noopener">kotlin-samples</a></p>
<hr>
<p>我是欧阳锋，一个热爱Kotlin语言编程的学生。如果你喜欢我的文章，请在文章下方留下你爱的印记。如果你不喜欢我的文章，请先喜欢上我的文章。然后再留下爱的印记！</p>
<p>下次文章再见，拜拜！</p>
<hr>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-02T10:03:00.000Z">2018-01-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Bug-Fix/">Bug Fix</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    32 分钟 读完 (大约 4777 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/02/bug fix/记一次印象深刻的Bug追踪过程/">记一次印象深刻的Bug追踪过程</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>问题现象：使用安卓手机以小程序的形式分享产品到微信，使用微信打开，产品详情数据无法显示。而使用iPhone分享到微信，却始终可以正常打开，这个时候所有的矛头都指向了安卓同学。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-cdf26125f909ddcb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="小程序中打开，显示空白"></p>
<p>逻辑设计说明：这里的分享数据来自H5接口，通过<code>addJavascriptInterface</code>自定义接口完成H5和Java端的数据传递，产品ID来自后台接口获取。</p>
<p>这个时候，安卓同学首先做出了响应，通过调试拿到了JS端的数据，以下是这位小陈同学的截图消息：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-bd7a8a062dfab805.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Android调试结果"></p>
<p>小陈同学这个时候把问题抛给了Web前端同学小徐，以为小徐传递了科学计数法的ID字符串。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-4dcd326299b5e4d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>大家看小陈同学的截图，图中的ID是使用字符串接收的，这个时候我已经完全排除问题出现在安卓端的可能性了。于是，我问小徐，H5有对参数进行处理吗？得到的答案如下：<br><img src="http://upload-images.jianshu.io/upload_images/703764-a28fd422fa316bcc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>大家看到图中，我已经给出了确定的答案，认为问题来自于后台。因为，后台同学之前的确出现过对ID进行toInt处理最终转换为负数的情况。现在在传递时出现这种低级错误的概率应该也挺高的。这段话抛出去之后，团队炸开了锅，有同学认为大家在互相推诿…</p>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-4ec531bb958ae6be.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>其实，还有很长的截图，这里没有展示出来。群里提到最多的一句话就是：<code>iOS没问题啊</code>。就连我们的运维同学以及UI设计同学都加入了“讨伐”队伍，种种迹象似乎都指向了安卓同学。这个时候，我们的安卓同学真是“哑巴吃黄连，有苦说不出”，心里的潜台词肯定是：我TM的就用<code>string</code>接收了一下，我招谁惹谁了我！</p>
<p>但其实出现这种不知所踪的情况，完全可以理解，大家大都集中在单一平台开发，对于其它环节的理解难免有偏差。其实，用常识来理解这个问题的话，的确后台的概率比较大，前端同学对ID进行运算处理的概率几乎为0，这一点即使是刚刚入行的新手也不太可能。而我一直苦等的后台同学却迟迟没有响应，我目前始终无法确定问题到底来自于后台还是Web前端。直到我终于看到了下面的截图。<br><img src="http://upload-images.jianshu.io/upload_images/703764-fc7196333abaedbe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这个时候，我终于有九成的把握确定问题来自于Web前端了。可是，我知道我不能明说。前端同学已经在聊天记录中给出了证据，在Chrome的控制台打印出了正常的id值，到了安卓端却出现了异常。前端同学这个时候心里也有了一个定性结论，问题来自安卓端。这个时候，我只能亲自上场，而恰好我在外面，正在办理深圳户口，比较不便。于是，我微信给小陈发消息，嘱咐它把详情页的源码“爬”下来，我回来看看源码。</p>
<p>回到家的时候，我问小陈html源码是否已经“爬”了下来，他给我发来截图，我意识到前端使用了https协议，没法获取html源码。于是，我想了一个办法，在源码中嵌入一段代码，通过代码的形式获取WebView产品详情页的数据。这个方法果然奏效，不一会儿，小陈就发来了页面的html源码。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-de788a95449192ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>哎哟，我的天哪！混淆后的代码简直不堪入目，不过还好，我可以搜索方法关键字<code>showShareView</code>。可是，很遗憾没有搜索到，事件的绑定被放到了JS代码中。在这段源码中，我注意到一个文件名已经被混淆的JS文件，我猜想代码应该就在这里。可是，怎样抓到具体的方法呢？</p>
<p>灵机一动！我之前在代码中让小陈把Debug权限开发给了H5，这次正好可以派上用场。可是，对于混淆后的代码，我心里依然有点打退堂鼓。</p>
<p>连上手机，在Chrome浏览器中输入chrome://inpsect，点击相应链接，非常顺利地进入了调试界面：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-753ad81eaaf2318d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>在控制台的Source中，我通过关键词搜索找到了混淆后的JS代码片段，在方法名前面增加了一个断点，等调试到底方法位置的时候。这个时候已经获取到了JS的上下文，直接通过<code>this.gid</code>打印出了当前产品ID信息，居然是一个非常正常的整型数字。大家注意，这已经是一个在安卓端出问题的产品了，在JS端居然显示是正常的。这个时候，我的大脑非常转动，我的第一感觉应该是<code>webkit</code>内核看到接收的字符串全是数字做了”自以为是“的转换。于是，我给出了团队如下的答案：<br><img src="http://upload-images.jianshu.io/upload_images/703764-02b3c3a21e2b0569.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>为了进一步确定我的猜想，我让小陈写了一个简单的Demo，通过JS接口传递一个非常大的数字字符串给Java端，看接收是否异常。不一会儿，我就得到了答案：<br><img src="http://upload-images.jianshu.io/upload_images/703764-64ba7132c99d0a56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>至此，我终于基本确定问题的原因了！<br>猜测：JS在传递数据给安卓端的时候，应该是使用了基本数据类型。而<code>webkit</code>内核在处理的时候可能是以JS端数据类型为准，在传递到Java端时候做了转换。</p>
<p>为了验证这个猜想，我使用<code>typeof</code>打印id的数据类型，得到了如下结果：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/703764-7615a576bf35a125.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>于是，我告诉小徐，问题来自于你没有传递正确的数据类型给安卓端。其实这是比较危险的，不同CPU可以容纳的最大整型值是不一样的。如果iOS端和安卓处理一致，也是以JS端数据类型为准，只不过iOS的CPU字节宽度较大，恰好在iPhone高端机型上面没有出现而低端机型出现的话。其实问题依然存在，而如果iOS的确是以Native端数据类型为准。这就根本不是一个问题。但答案虽然给了团队，可是小徐仍然一脸狐疑，没有经验的CTO也是跟着一脸狐疑，加上解决问题的时间较长。小徐在发布更新的时候也遇到了问题，导致更新失败，问题持续，整个问题一直在持续。</p>
<p>这个时候，我告诉小徐，你发布更新后先别着急，确定更新成功后再告诉团队小伙伴。</p>
<p>一直到确定更新成功，我们再次尝试分享，问题终于引刃而解！</p>
<blockquote>
<p>问题虽然解决了，可是，安卓系统为什么要这样处理呢？为什么不能以Native端数据类型为准呢？带着这个疑问，我开始查看安卓源码。</p>
</blockquote>
<p>阅读安卓源码是一个痛苦的过程，随着系统版本的升级，安卓系统的兼容性代码越来越多，这给阅读带来了极大的困难。加上安卓系统本身源码量巨大，阅读源码就像在一个巨大的森林中寻找宝藏一样。这个时候，其实你非常容易迷路，而我知道，只要我坚信我想要什么，就一定可以找到。</p>
<p>这里我们以<code>addJavascriptInterface</code>这个方法作为突破口，进入源码：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void addJavascriptInterface(Object object, String name) &#123;</span><br><span class="line">       checkThread();</span><br><span class="line">       mProvider.addJavascriptInterface(object, name);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>额，mProvider是什么鬼？难道WebView只是一个傀儡，真正处理业务的其实是mProvider？是的，没错！WebView只不过是一个壳而已！可是，mProvider的实现到底是什么呢？带着这个疑问，我们看到了如下mProvider实例创建的方法：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private void ensureProviderCreated() &#123;</span><br><span class="line">      checkThread();</span><br><span class="line">      if (mProvider == null) &#123;</span><br><span class="line">          // As this can get called during the base class constructor chain, pass the minimum</span><br><span class="line">          // number of dependencies here; the rest are deferred to init().</span><br><span class="line">          mProvider = getFactory().createWebView(this, new PrivateAccess());</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private static WebViewFactoryProvider getFactory() &#123;</span><br><span class="line">      return WebViewFactory.getProvider();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>又出现了一个工厂方法，别怕，继续往下追踪：<br>getProvider方法较长，我们截取部分，看下面源码：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">static WebViewFactoryProvider getProvider() &#123;</span><br><span class="line">        synchronized (sProviderLock) &#123;</span><br><span class="line">            // For now the main purpose of this function (and the factory abstraction) is to keep</span><br><span class="line">            // us honest and minimize usage of WebView internals when binding the proxy.</span><br><span class="line">            if (sProviderInstance != null) return sProviderInstance;</span><br><span class="line"></span><br><span class="line">            final int uid = android.os.Process.myUid();</span><br><span class="line">            if (uid == android.os.Process.ROOT_UID || uid == android.os.Process.SYSTEM_UID</span><br><span class="line">                    || uid == android.os.Process.PHONE_UID || uid == android.os.Process.NFC_UID</span><br><span class="line">                    || uid == android.os.Process.BLUETOOTH_UID) &#123;</span><br><span class="line">                throw new UnsupportedOperationException(</span><br><span class="line">                        &quot;For security reasons, WebView is not allowed in privileged processes&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            StrictMode.ThreadPolicy oldPolicy = StrictMode.allowThreadDiskReads();</span><br><span class="line">            Trace.traceBegin(Trace.TRACE_TAG_WEBVIEW, &quot;WebViewFactory.getProvider()&quot;);</span><br><span class="line">            try &#123;</span><br><span class="line">                Class&lt;WebViewFactoryProvider&gt; providerClass = getProviderClass();</span><br><span class="line">                Method staticFactory = null;</span><br><span class="line">                try &#123;</span><br><span class="line">                    staticFactory = providerClass.getMethod(</span><br><span class="line">                        CHROMIUM_WEBVIEW_FACTORY_METHOD, WebViewDelegate.class);</span><br><span class="line">                &#125; catch (Exception e) &#123;</span><br><span class="line">                    if (DEBUG) &#123;</span><br><span class="line">                        Log.w(LOGTAG, &quot;error instantiating provider with static factory method&quot;, e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br></pre></td></tr></table></figure></p>
<p>这里的单用户检测，安全调用之类的代码就先忽略了。集中注意力看Provider实例创建的代码，大家可以看到，这里的创建其实通过反射调用创建的。这里有一个关键的方法<code>getProviderClass()</code>，这个方法可能获取到真正的Provider类对象，跟踪这个方法调用，我们看到了如下的调用过程：<br><code>getProviderClass() -&gt; getWebViewProviderClass</code></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static Class&lt;WebViewFactoryProvider&gt; getWebViewProviderClass(ClassLoader clazzLoader)</span><br><span class="line">           throws ClassNotFoundException &#123;</span><br><span class="line">       return (Class&lt;WebViewFactoryProvider&gt;) Class.forName(CHROMIUM_WEBVIEW_FACTORY,</span><br><span class="line">               true, clazzLoader);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>看到了吗？<code>CHROMIUM_WEBVIEW_FACTORY</code> 这才是真正的<code>WebViewFactoryProvider</code>类声明，跟进这个常量：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static final String CHROMIUM_WEBVIEW_FACTORY = &quot;com.android.webview.chromium.WebViewChromiumFactoryProviderForO&quot;;</span><br></pre></td></tr></table></figure></p>
<p>从命名ForO来看，这个类恰好是用于最新版本Android系统<code>Oreo</code>的。没错，这里我们就从最新版本的源码入手，找到真正的问题”元凶“。</p>
<p>可是，这个代码在哪里呢？你搜索安卓源码，根本搜索不到该类，这是为什么呢？也许你已经猜到了，其实这段代码就来自于Chrome核心工程 <strong>chromium</strong>。这段代码，大家通过谷歌搜索找找看，这里我们以官方版本的代码为准：<br><a href="https://chromium.googlesource.com/chromium/src.git/+/28cc253ce347f9a58a0e7c6b7b249c239c4b2669/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumFactoryProviderForO.java" target="_blank" rel="noopener">WebViewChromiumFactoryProviderForO</a></p>
<p>具体代码很简单，如下：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package com.android.webview.chromium;</span><br><span class="line">class WebViewChromiumFactoryProviderForO extends WebViewChromiumFactoryProvider &#123;</span><br><span class="line">    public static WebViewChromiumFactoryProvider create(android.webkit.WebViewDelegate delegate) &#123;</span><br><span class="line">        return new WebViewChromiumFactoryProviderForO(delegate);</span><br><span class="line">    &#125;</span><br><span class="line">    protected WebViewChromiumFactoryProviderForO(android.webkit.WebViewDelegate delegate) &#123;</span><br><span class="line">        super(delegate);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>LOL，可是，你以为真的很简单吗？其实不然，实现在父类，跟进父类。这个时候千万保持清醒，别跟丢了哦。我们想要的是Provider的创建过程，这个是Provider工厂类的真正类型，由它完成WebViewProvider的创建。</p>
<p>如果你已经忘了，我们再来回顾一下刚刚创建WebViewProvider的代码，别走神，看这里：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private void ensureProviderCreated() &#123;</span><br><span class="line">      checkThread();</span><br><span class="line">      if (mProvider == null) &#123;</span><br><span class="line">          // As this can get called during the base class constructor chain, pass the minimum</span><br><span class="line">          // number of dependencies here; the rest are deferred to init().</span><br><span class="line">          mProvider = getFactory().createWebView(this, new PrivateAccess());</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>看到了吗？这里拿到工厂类之后，调用了createWebView方法创建了Provider对象。那好办了，我们在<code>WebViewChromiumFactoryProviderForO</code>的父类<code>WebViewChromiumFactoryProvider</code>直接搜索<code>createWebView</code>方法即可。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    public WebViewProvider createWebView(WebView webView, WebView.PrivateAccess privateAccess) &#123;</span><br><span class="line">        return new WebViewChromium(this, webView, privateAccess, mShouldDisableThreadChecking);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>怎么样，这段代码熟悉吗？这里直接返回了一个WebViewChromium对象，也就是说，WebView的所有操作，都由WebViewChromium帮忙完成。好吧，我们继续跟进这个类。可是跟进这个类做什么呢？哈哈，忘了吧，我们的目的是寻找<code>addJavascriptInterface</code>实现。稍等，容我先擦一把汗。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">  public void addJavascriptInterface(final Object obj, final String interfaceName) &#123;</span><br><span class="line">      if (checkNeedsPost()) &#123;</span><br><span class="line">          mFactory.addTask(new Runnable() &#123;</span><br><span class="line">              @Override</span><br><span class="line">              public void run() &#123;</span><br><span class="line">                  addJavascriptInterface(obj, interfaceName);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">          return;</span><br><span class="line">      &#125;</span><br><span class="line">      mAwContents.addJavascriptInterface(obj, interfaceName);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>稍微瞅一眼这个方法<code>checkNeedsPost</code><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">protected boolean checkNeedsPost() &#123;</span><br><span class="line">       boolean needsPost = !mFactory.hasStarted() || !ThreadUtils.runningOnUiThread();</span><br><span class="line">       if (!needsPost &amp;&amp; mAwContents == null) &#123;</span><br><span class="line">           throw new IllegalStateException(&quot;AwContents must be created if we are not posting!&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">       return needsPost;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>简单理解一下，如果已经启动或者调用该方法的线程不在UI线程，则需要post到UI线程中去，这里很明显，我们的调用是在UI线程中。因此，我们之间走下面的分支: <code>mAwContents.addJavascriptInterface(obj, interfaceName);</code>。那么，问题来了，AwContent又是什么鬼？在哪里创建的呢？</p>
<p>仔细查找这个类，我们发现AwContent是在initForReal方法中被创建的。而initForReal调用来自init方法。可是，init方法是在哪里调用的呢？答案是：WebView。看下面的截图：<br><img src="http://upload-images.jianshu.io/upload_images/703764-d2adacd680391f4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>OK，继续往下，看AwContent是怎么创建的。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">private void initForReal() &#123;</span><br><span class="line">       AwContentsStatics.setRecordFullDocument(sRecordWholeDocumentEnabledByApi</span><br><span class="line">               || mAppTargetSdkVersion &lt; Build.VERSION_CODES.LOLLIPOP);</span><br><span class="line">       mAwContents = new AwContents(mFactory.getBrowserContextOnUiThread(), mWebView, mContext,</span><br><span class="line">               new InternalAccessAdapter(), new WebViewNativeDrawGLFunctorFactory(),</span><br><span class="line">               mContentsClientAdapter, mWebSettings.getAwSettings(),</span><br><span class="line">               new AwContents.DependencyFactory() &#123;</span><br><span class="line">                   @Override</span><br><span class="line">                   public AutofillProvider createAutofillProvider(</span><br><span class="line">                           Context context, ViewGroup containerView) &#123;</span><br><span class="line">                       return mFactory.createAutofillProvider(context, mWebView);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">       if (mAppTargetSdkVersion &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">           // On KK and above, favicons are automatically downloaded as the method</span><br><span class="line">           // old apps use to enable that behavior is deprecated.</span><br><span class="line">           AwContents.setShouldDownloadFavicons();</span><br><span class="line">       &#125;</span><br><span class="line">       if (mAppTargetSdkVersion &lt; Build.VERSION_CODES.LOLLIPOP) &#123;</span><br><span class="line">           // Prior to Lollipop, JavaScript objects injected via addJavascriptInterface</span><br><span class="line">           // were not inspectable.</span><br><span class="line">           mAwContents.disableJavascriptInterfacesInspection();</span><br><span class="line">       &#125;</span><br><span class="line">       // TODO: This assumes AwContents ignores second Paint param.</span><br><span class="line">       mAwContents.setLayerType(mWebView.getLayerType(), null);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>下面是一些版本兼容判断，与本文探讨主题无关，先忽略。好了，看到这里，大家是不是感觉被安卓源码忽悠的团团转，最开始我们天真地以为真正的调用来自WebView，安卓系统告诉我们来自WebViewProvider，我们以为这应该就是头了。可是现在又出现了一个AwContent。那么，它是不是真正的最终调用者呢？继续往下看：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * @see ContentViewCore#addPossiblyUnsafeJavascriptInterface(Object, String, Class)</span><br><span class="line">     */</span><br><span class="line">    @SuppressLint(&quot;NewApi&quot;)  // JavascriptInterface requires API level 17.</span><br><span class="line">    public void addJavascriptInterface(Object object, String name) &#123;</span><br><span class="line">        if (TRACE) Log.i(TAG, &quot;%s addJavascriptInterface=%s&quot;, this, name);</span><br><span class="line">        if (isDestroyedOrNoOperation(WARN)) return;</span><br><span class="line">        Class&lt;? extends Annotation&gt; requiredAnnotation = null;</span><br><span class="line">        if (mAppTargetSdkVersion &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &#123;</span><br><span class="line">            requiredAnnotation = JavascriptInterface.class;</span><br><span class="line">        &#125;</span><br><span class="line">        mContentViewCore.addPossiblyUnsafeJavascriptInterface(object, name, requiredAnnotation);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>我擦，又来了一个调用对象<code>mContentViewCore</code>。Relax，继续往下看，看它的实现：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public void addPossiblyUnsafeJavascriptInterface(Object object, String name,</span><br><span class="line">        Class&lt;? extends Annotation&gt; requiredAnnotation) &#123;</span><br><span class="line">    if (mNativeContentViewCore != 0 &amp;&amp; object != null) &#123;</span><br><span class="line">        mJavaScriptInterfaces.put(name, object);</span><br><span class="line">        nativeAddJavascriptInterface(mNativeContentViewCore, object, name, requiredAnnotation,</span><br><span class="line">                mRetainedJavaScriptObjects);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>看方法名，nativeAddJavascriptInterface看起来最终调用来自于Native，继续往下看：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">private native void nativeAddJavascriptInterface(int nativeContentViewCoreImpl, Object object,</span><br><span class="line">         String name, Class requiredAnnotation, HashSet&lt;Object&gt; retainedObjectSet);</span><br></pre></td></tr></table></figure></p>
<p>接下来看C++代码，这里的中间调用过程没有深究，但最终应该是来到了这里：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">static void AddJavascriptInterface(JNIEnv *env, jobject obj, jint nativeFramePointer,</span><br><span class="line">        jobject javascriptObj, jstring interfaceName)</span><br><span class="line">&#123;</span><br><span class="line">#ifdef ANDROID_INSTRUMENT</span><br><span class="line">    TimeCounterAuto counter(TimeCounter::NativeCallbackTimeCounter);</span><br><span class="line">#endif</span><br><span class="line">    WebCore::Frame* pFrame = 0;</span><br><span class="line">    if (nativeFramePointer == 0)</span><br><span class="line">        pFrame = GET_NATIVE_FRAME(env, obj);</span><br><span class="line">    else</span><br><span class="line">        pFrame = (WebCore::Frame*)nativeFramePointer;</span><br><span class="line">    LOG_ASSERT(pFrame, &quot;nativeAddJavascriptInterface must take a valid frame pointer!&quot;);</span><br><span class="line">    JavaVM* vm;</span><br><span class="line">    env-&gt;GetJavaVM(&amp;vm);</span><br><span class="line">    LOGV(&quot;::WebCore:: addJSInterface: %p&quot;, pFrame);</span><br><span class="line">#if USE(JSC)</span><br><span class="line">    // Copied from qwebframe.cpp</span><br><span class="line">    JSC::JSLock lock(false);</span><br><span class="line">    WebCore::JSDOMWindow *window = WebCore::toJSDOMWindow(pFrame);</span><br><span class="line">    if (window) &#123;</span><br><span class="line">        JSC::Bindings::RootObject *root = pFrame-&gt;script()-&gt;bindingRootObject();</span><br><span class="line">        JSC::Bindings::setJavaVM(vm);</span><br><span class="line">        // Add the binding to JS environment</span><br><span class="line">        JSC::ExecState* exec = window-&gt;globalExec();</span><br><span class="line">        JSC::JSObject *addedObject = WeakJavaInstance::create(javascriptObj,</span><br><span class="line">                root)-&gt;createRuntimeObject(exec);</span><br><span class="line">        const jchar* s = env-&gt;GetStringChars(interfaceName, NULL);</span><br><span class="line">        if (s) &#123;</span><br><span class="line">            // Add the binding name to the window&apos;s table of child objects.</span><br><span class="line">            JSC::PutPropertySlot slot;</span><br><span class="line">            window-&gt;put(exec, JSC::Identifier(exec, (const UChar *)s, </span><br><span class="line">                    env-&gt;GetStringLength(interfaceName)), addedObject, slot);</span><br><span class="line">            env-&gt;ReleaseStringChars(interfaceName, s);</span><br><span class="line">            checkException(env);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">#endif  // USE(JSC)</span><br><span class="line">#if USE(V8)</span><br><span class="line">    if (pFrame) &#123;</span><br><span class="line">        const char* name = JSC::Bindings::getCharactersFromJStringInEnv(env, interfaceName);</span><br><span class="line">        NPObject* obj = JSC::Bindings::JavaInstanceToNPObject(new JSC::Bindings::JavaInstance(javascriptObj));</span><br><span class="line">        pFrame-&gt;script()-&gt;bindToWindowObject(pFrame, name, obj);</span><br><span class="line">        // JavaInstanceToNPObject calls NPN_RetainObject on the</span><br><span class="line">        // returned one (see CreateV8ObjectForNPObject in V8NPObject.cpp).</span><br><span class="line">        // BindToWindowObject also increases obj&apos;s ref count and decrease</span><br><span class="line">        // the ref count when the object is not reachable from JavaScript</span><br><span class="line">        // side. Code here must release the reference count increased by</span><br><span class="line">        // JavaInstanceToNPObject.</span><br><span class="line">        _NPN_ReleaseObject(obj);</span><br><span class="line">        JSC::Bindings::releaseCharactersForJString(interfaceName, name);</span><br><span class="line">    &#125;</span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里的代码量较大，我们主要关注下面这一行代码：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window-&gt;put(exec, JSC::Identifier(exec, (const UChar *)s, </span><br><span class="line">                   env-&gt;GetStringLength(interfaceName)), addedObject, slot);</span><br></pre></td></tr></table></figure></p>
<p>最终数据的处理原来来自于C++端的window对象，这又是什么呢？继续看：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WebCore::JSDOMWindow *window = WebCore::toJSDOMWindow(pFrame);</span><br></pre></td></tr></table></figure></p>
<p>这是在WebCore命名空间下面的<code>JSDOMWindow</code>对象，看到这里，其实大多数同学应该已经都没有兴趣看下去了。这实在是一个冗长的调用过程，而且在阅读源码过程中，我们还忽略多进程调用，忽略各种细节。对此，关于这段源码的阅读，我们暂且告一段落，等时间充裕，我再来补充。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这次的问题牵扯了移动端、Web前端和后台，这种跨平台的问题解决起来的确存在很大的困难。其实，我已经很长时间没有写JS了，仅仅在几个月前使用RN的时候有了解一些ES6的语法。凭借刚刚工作时仅有的2个月JS经验，加上在多方面知识的累积，总算顺利解决了问题。其实，根据我的经验来看，越是看起来无头绪的问题，往往越是一个极其简单的问题。为了避免出现这种问题，在编码过程中，必须小心翼翼。尽量多检查几次，避免出现类似这样的错误。另外，要尝试接受不一样的观点，如果你一开始就接受了其他人的观点，在解决问题上就会有很强的目的性，解决问题的速度也就更快。</p>
<blockquote>
<p>最后，新的一年里，祝大家万事如意，阖家欢乐，工作顺顺利利，身体健健康康。</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-21T16:25:00.000Z">2016-08-22</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 分钟 读完 (大约 1930 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/22/kotlin/delegation/">Kotlin 代理模式</a>
            
        </h1>
        <div class="content">
            <p>代理模式是23种经典设计模式之一，代理模式被认为是继承的更好替代解决方案；因为代理比继承更加灵活，在Java语言中，通过反射可以实现动态代理，动态代理可以实现<strong>AOP</strong>编程，即：可以动态地往已有类中添加逻辑；比如：实现事务的自动提交，异常的自动捕获，热修复等等; </p>
<p>在Kotlin语言中，代理模式是默认支持的，不需要任何额外的代码，你只需要记住一个关键字<strong>by</strong>。我们不妨来试一下:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface Base &#123;</span><br><span class="line">    fun sayHi()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class BaseImpl : Base &#123;</span><br><span class="line">    override fun sayHi() &#123;</span><br><span class="line">        println(&quot;BaseImpl-&gt;sayHi&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Derived(b: Base) : Base by b</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val b = BaseImpl()</span><br><span class="line">    val derived = Derived(b)</span><br><span class="line">    derived.sayHi()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里Derived作为BaseImpl的代理类，拥有BaseImpl类中的所有方法，Derived将代理BaseImpl类执行BaseImpl类中的所有方法，就像继承自BaseImpl类一样。这样说起来有点抽象，来看一下Kotlin编译器具体为我们做了一些什么。但是，怎么看呢？教大家一个方法！<br>大家都知道，Kotlin和Java均是JVM语言，最终均转换到同样的Java字节码，这样我们就可以先将Kotlin编译为.class文件，再反编译为.java文件，看看对应的Java代码，我们就可以看到更多的细节。下面是最终反编译生成的Java代码:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public final class Derived implements Base &#123;</span><br><span class="line">  public Derived(@NotNull Base b) &#123;</span><br><span class="line">    this.$$delegate_0 = b;</span><br><span class="line">  &#125;</span><br><span class="line">  public void sayHi() &#123;</span><br><span class="line">    this.$$delegate_0.sayHi();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里，我们可以清楚地看到，Kotlin编译器为我们动态添加了一个成员变量$$delegate_0，这个成员变量代表被代理的对象，这里对应的是BaseImpl对象，Derived里面的sayHi方法最终调用是代理对象的sayHi方法，即Kotlin编译器帮我们提供了一个非常漂亮的代理模式实现。</p>
<h1 id="代理属性"><a href="#代理属性" class="headerlink" title="代理属性"></a>代理属性</h1><p>在一些情况下，我们可能希望某些属性延迟加载，即在我们正在需要的时候才对它赋值；亦或者我们希望可以随时监听属性值的变化；在上述这些场景中，代理属性就可以发挥作用了。</p>
<p>代理属性的语法格式如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class DelegateProperty &#123;</span><br><span class="line">	val d: String by Delegate()</span><br><span class="line">&#125;</span><br><span class="line">class Delegate &#123;</span><br><span class="line">    operator fun getValue(thisRef: Any? , property: KProperty&lt;*&gt;): String &#123;</span><br><span class="line">        return &quot;Invoke getValue() , thisRef = $thisRef , property name = $&#123;property.name&#125;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    operator fun setValue(thisRef: Any? , property: KProperty&lt;*&gt; , value: String) &#123;</span><br><span class="line">        println(&quot;Invoke setValue() , thisRef = $thisRef , property name = $&#123;property.name&#125; , value = $value&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val dp = DelegatedProperty()</span><br><span class="line">    dp.d = &quot;Value0&quot; // Invoke setValue() , thisRef = DelegatedProperty@2ef1e4fa , property name = d , value = Value0</span><br><span class="line">   </span><br><span class="line">    println(dp.d) // Invoke getValue() , thisRef = DelegatedProperty@2ef1e4fa , property name = d</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里的代理是如何实现的呢？我们知道，Kotlin的属性值会自动生成set/get方法，而代理类通过代理set/get方法生成相应的代理方法，这里的方法对应关系如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// thisRef对应代理对象的引用，property对应代理属性的反射属性封装</span><br><span class="line">// 注意这里的代理方法一定要添加operator关键字，operator关键字是重载操作符关键字，后续的文章中会讲到，敬请期待</span><br><span class="line">get() -&gt; operator fun getValue(thisRef: Any? , property: KProperty&lt;*&gt;)</span><br><span class="line">set() -&gt; operator fun setValue(thisRef: Any? , property: KProperty&lt;*&gt; , value: T)</span><br></pre></td></tr></table></figure>
<p>Kotlin标准库提供了一些常用代理的方法实现，即上文提到的几种代理，先来看第一种：延迟加载。</p>
<h3 id="延迟加载"><a href="#延迟加载" class="headerlink" title="延迟加载"></a>延迟加载</h3><p>Kotlin提供了一个lazy方法用于实现延迟加载，lazy方法有一个lambda表达式参数，用于对属性进行初始化赋值，而一旦完成赋值，该lambda表达式将不会再次调用。lambda表达式调用发生在第一次使用该属性的时候，即实现了属性赋值的延迟加载。来看一个简单的例子:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 使用标准库实现的lazy函数，实现属性的延迟加载</span><br><span class="line">private val lazyValue: String by lazy &#123;</span><br><span class="line">    println(&quot;调用该初始赋值表达式完成赋值&quot;)</span><br><span class="line">    // 这里是实际赋值</span><br><span class="line">    &quot;Hello, world&quot;</span><br><span class="line">&#125;</span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    // 仅在第一次会调用lazy方法的lambda表达式</span><br><span class="line">    println(lazyValue) // 打印：调用该初始赋值表达式完成赋值</span><br><span class="line">    println(lazyValue) // 打印： Hello, world, 再次调用将不再调用lambda表达式</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>lazy方法是一个线程安全的延迟加载方法，为了加深大家的理解，根据上面的原理，我们尝试自己来实现一个非线程安全的延迟加载方法，看具体实现：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">private object UNINITIALIZE_VALUE</span><br><span class="line"></span><br><span class="line">class MyLazy&lt;T&gt;(initialize: ()-&gt;T) &#123;</span><br><span class="line">    private var value: Any? = UNINITIALIZE_VALUE</span><br><span class="line">    private val initialize = initialize</span><br><span class="line">    operator fun getValue(thisRef: Any? , property: KProperty&lt;*&gt;): T &#123;</span><br><span class="line">        if(value == UNINITIALIZE_VALUE) &#123;</span><br><span class="line">            value = initialize()</span><br><span class="line">        &#125;</span><br><span class="line">        return value as T</span><br><span class="line">    &#125;</span><br><span class="line">    operator fun setValue(thisRef: Any? , property: KProperty&lt;*&gt; , value: T) &#123;</span><br><span class="line">        this.value = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 为了和标准库区分，使用__lazy命名</span><br><span class="line">fun &lt;T&gt;  __lazy(initialize: () -&gt; T): MyLazy&lt;T&gt; = MyLazy(initialize)</span><br><span class="line"></span><br><span class="line">var lazyValue1 by __lazy &#123;</span><br><span class="line">    println(&quot;自定义lazy初始化赋值表达式被调用&quot;)</span><br><span class="line">    &quot;Hello , world&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    // 自定义延迟加载函数__lazy</span><br><span class="line">    println(lazyValue1)</span><br><span class="line">    lazyValue1 = &quot;Other value&quot;</span><br><span class="line">    println(lazyValue1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由此可见，实现一个延迟加载接口并不复杂，最重要的是要理解延迟加载的过程以及实现原理。总结实现延迟加载接口，需要注意三个地方：</p>
<ul>
<li>需要提供初始化lambda表达式参数，用于初始赋值</li>
<li>需要实现代理属性对象的setValue/getValue方法，如果是val则只需要实现getValue即可</li>
<li>需要严格确保属性不会被多次初始化 </li>
</ul>
<h3 id="Observable属性"><a href="#Observable属性" class="headerlink" title="Observable属性"></a>Observable属性</h3><p>Kotlin标准库还提供了一个可观察属性，这个属性使用观察者模式实现，如果属性值发生变化则会调用相应的回调lambda接口通知使用者，先看一个具体的例子:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var observableValue by Delegates.observable(&quot;Initial value&quot;) &#123;  prop , old , new -&gt;</span><br><span class="line">    println(&quot;$old -&gt; $new&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    println(observableValue)    // 打印：Initial value</span><br><span class="line">    observableValue = &quot;Hello&quot;   // 打印: Initial value -&gt; Hello</span><br><span class="line">    println(observableValue)    // 打印：Hello</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里的具体实现，感兴趣的同学请参看文章开头的方法进行追踪！</p>
<h3 id="Storing-Properties-in-a-Map"><a href="#Storing-Properties-in-a-Map" class="headerlink" title="Storing Properties in a Map"></a>Storing Properties in a Map</h3><p>这也是Kotlin标准库提供的一个非常有用的特性，它主要用于JSON数据的解析。看官方的例子：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class User(val map: Map&lt;String, Any?&gt;) &#123;</span><br><span class="line">	val name: String by map</span><br><span class="line">	val age: Int by map</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val user = User(mapOf(</span><br><span class="line">	&quot;name&quot; to &quot;John Doe&quot;,</span><br><span class="line">	&quot;age&quot; to 25</span><br><span class="line">))</span><br></pre></td></tr></table></figure>
<p>该方法比较简单，这里就不再赘述了！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>至此，关于代理的介绍可以暂时告一段落了！<br>代理模式是一个非常经典设计模式，在解决某些问题中可以发挥事半功倍的效果。幸运的是，Kotlin语言原生支持代理模式，实现代理模式如同声明一个属性一样简单。而且，代理模式的设计也非常漂亮，仅仅使用一个关键字by极尽简约之美。在日常编码中，一定要灵活运用代理模式，比如实现延迟加载，实现属性观察等等。<a href="https://github.com/JakeWharton/kotterknife" target="_blank" rel="noopener">KotterKnife</a> 是一个非常经典的代理模式的实现例子，有兴趣的同学可以clone该仓库，查看源码，领会代理模式的优美。</p>
<h1 id="欢迎加入Kotlin交流群"><a href="#欢迎加入Kotlin交流群" class="headerlink" title="欢迎加入Kotlin交流群"></a>欢迎加入Kotlin交流群</h1><p>如果你也喜欢Kotlin语言，欢迎加入我的Kotlin交流群： 329673958 ，一起来参与Kotlin语言的推广工作。</p>
<h1 id="文章源码地址"><a href="#文章源码地址" class="headerlink" title="文章源码地址"></a>文章源码地址</h1><p>Kotliner: <a href="https://github.com/yuanhoujun/Kotliner" target="_blank" rel="noopener">https://github.com/yuanhoujun/Kotliner</a>,<br>别忘了点击仓库右上方的star哦！</p>

        </div>
        
        
        
    </div>
</div>








</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <figure class="image is-128x128 has-mb-6">
                            <img class="is-rounded" src="https://avatars2.githubusercontent.com/u/7424397?s=400&amp;u=41a286b5d8e1144211d1f6312986f4c687901b17&amp;v=4" alt="欧阳锋">
                        </figure>
                    
                    
                    <p class="is-size-4 is-block">
                        欧阳锋
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        人生在勤，不索何获
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>广东 深圳</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        20
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        12
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        40
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/yuanhoujun" target="_blank">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Github" href="https://github.com/yuanhoujun">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="新浪微博" href="https://weibo.com/u/6998296003">
                
                <i class="fab fa-weibo"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="微信公众号" href="https://upload-images.jianshu.io/upload_images/703764-d8085a19fb8f5408.jpg">
                
                <i class="fab fa-weixin"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="公司官网" href="https://yhdm360.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="十分简历" href="https://www.10fenjl.com">
                
                <i class="far fa-registered"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://yhdm360.com" target="_blank">
                    <span class="level-left">
                        <span class="level-item">一行代码</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">yhdm360.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.10fenjl.com" target="_blank">
                    <span class="level-left">
                        <span class="level-item">十分简历</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.10fenjl.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Bug-Fix/">
            <span class="level-start">
                <span class="level-item">Bug Fix</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/IT小知识/">
            <span class="level-start">
                <span class="level-item">IT小知识</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Kotlin/">
            <span class="level-start">
                <span class="level-item">Kotlin</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">10</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Kotlin/基础知识/">
            <span class="level-start">
                <span class="level-item">基础知识</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">9</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Kotlin/杂谈/">
            <span class="level-start">
                <span class="level-item">杂谈</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/关于欧阳锋/">
            <span class="level-start">
                <span class="level-item">关于欧阳锋</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/创业札记/">
            <span class="level-start">
                <span class="level-item">创业札记</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/开发工具/">
            <span class="level-start">
                <span class="level-item">开发工具</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/开发工具/Git/">
            <span class="level-start">
                <span class="level-item">Git</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/开源/">
            <span class="level-start">
                <span class="level-item">开源</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/设计模式/">
            <span class="level-start">
                <span class="level-item">设计模式</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/随文杂记/">
            <span class="level-start">
                <span class="level-item">随文杂记</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/2017/" style="font-size: 12.5px;">2017</a> <a href="/tags/Android/" style="font-size: 17.5px;">Android</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/Groovy/" style="font-size: 10px;">Groovy</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Kotlin/" style="font-size: 20px;">Kotlin</a> <a href="/tags/Kotlin基础/" style="font-size: 10px;">Kotlin基础</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/infix/" style="font-size: 10px;">infix</a> <a href="/tags/object/" style="font-size: 10px;">object</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/代理属性/" style="font-size: 10px;">代理属性</a> <a href="/tags/代理模式/" style="font-size: 10px;">代理模式</a> <a href="/tags/关注/" style="font-size: 10px;">关注</a> <a href="/tags/创业/" style="font-size: 10px;">创业</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/动态代理/" style="font-size: 10px;">动态代理</a> <a href="/tags/十分简历/" style="font-size: 10px;">十分简历</a> <a href="/tags/命令行/" style="font-size: 10px;">命令行</a> <a href="/tags/工作室/" style="font-size: 10px;">工作室</a> <a href="/tags/延迟加载/" style="font-size: 10px;">延迟加载</a> <a href="/tags/开发工具/" style="font-size: 10px;">开发工具</a> <a href="/tags/开源/" style="font-size: 10px;">开源</a> <a href="/tags/总结/" style="font-size: 12.5px;">总结</a> <a href="/tags/扩展/" style="font-size: 10px;">扩展</a> <a href="/tags/操作符/" style="font-size: 10px;">操作符</a> <a href="/tags/欧阳锋/" style="font-size: 10px;">欧阳锋</a> <a href="/tags/泛型/" style="font-size: 10px;">泛型</a> <a href="/tags/深圳一行代码科技有限公司/" style="font-size: 10px;">深圳一行代码科技有限公司</a> <a href="/tags/滑动返回/" style="font-size: 10px;">滑动返回</a> <a href="/tags/版本控制工具/" style="font-size: 10px;">版本控制工具</a> <a href="/tags/相对论/" style="font-size: 10px;">相对论</a> <a href="/tags/编程/" style="font-size: 10px;">编程</a> <a href="/tags/编程语言/" style="font-size: 15px;">编程语言</a> <a href="/tags/脚本/" style="font-size: 10px;">脚本</a> <a href="/tags/视频教程/" style="font-size: 10px;">视频教程</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/重载/" style="font-size: 10px;">重载</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/01/12/写在十分简历发布前夕/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="写在十分简历发布前夕">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-12T10:52:00.000Z">2019-01-12</time></div>
                    <a href="/2019/01/12/写在十分简历发布前夕/" class="has-link-black-ter is-size-6">写在十分简历发布前夕</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/创业札记/">创业札记</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/07/09/kotlin/2018最新Kotlin基础视频教程上线了/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2018最新Kotlin基础视频教程上线了">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-07-09T07:02:00.000Z">2018-07-09</time></div>
                    <a href="/2018/07/09/kotlin/2018最新Kotlin基础视频教程上线了/" class="has-link-black-ter is-size-6">2018最新Kotlin基础视频教程上线了</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/04/27/kotlin/那些年，我们看不懂的那些Kotlin标准函数/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="那些年，我们看不懂的那些Kotlin标准函数">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-04-27T07:21:00.000Z">2018-04-27</time></div>
                    <a href="/2018/04/27/kotlin/那些年，我们看不懂的那些Kotlin标准函数/" class="has-link-black-ter is-size-6">那些年，我们看不懂的那些Kotlin标准函数</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/04/27/kotlin/测测你的Kotlin基础/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="测测你的Kotlin基础">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-04-27T07:09:00.000Z">2018-04-27</time></div>
                    <a href="/2018/04/27/kotlin/测测你的Kotlin基础/" class="has-link-black-ter is-size-6">测测你的Kotlin基础</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/04/27/kotlin/关于Kotlin抛弃可检测的异常处理，你怎么看？/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="关于Kotlin抛弃可检测的异常处理，你怎么看？">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-04-27T06:57:00.000Z">2018-04-27</time></div>
                    <a href="/2018/04/27/kotlin/关于Kotlin抛弃可检测的异常处理，你怎么看？/" class="has-link-black-ter is-size-6">关于Kotlin抛弃可检测的异常处理，你怎么看？</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/2017/">
                        <span class="tag">2017</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Git/">
                        <span class="tag">Git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gradle/">
                        <span class="tag">Gradle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Groovy/">
                        <span class="tag">Groovy</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin/">
                        <span class="tag">Kotlin</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin基础/">
                        <span class="tag">Kotlin基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Markdown/">
                        <span class="tag">Markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/infix/">
                        <span class="tag">infix</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/object/">
                        <span class="tag">object</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/this/">
                        <span class="tag">this</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/代理属性/">
                        <span class="tag">代理属性</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/代理模式/">
                        <span class="tag">代理模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/关注/">
                        <span class="tag">关注</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/创业/">
                        <span class="tag">创业</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/前端/">
                        <span class="tag">前端</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态代理/">
                        <span class="tag">动态代理</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/十分简历/">
                        <span class="tag">十分简历</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/命令行/">
                        <span class="tag">命令行</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工作室/">
                        <span class="tag">工作室</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/延迟加载/">
                        <span class="tag">延迟加载</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开发工具/">
                        <span class="tag">开发工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源/">
                        <span class="tag">开源</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/总结/">
                        <span class="tag">总结</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/扩展/">
                        <span class="tag">扩展</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/操作符/">
                        <span class="tag">操作符</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/欧阳锋/">
                        <span class="tag">欧阳锋</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/泛型/">
                        <span class="tag">泛型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/深圳一行代码科技有限公司/">
                        <span class="tag">深圳一行代码科技有限公司</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/滑动返回/">
                        <span class="tag">滑动返回</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/版本控制工具/">
                        <span class="tag">版本控制工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/相对论/">
                        <span class="tag">相对论</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程/">
                        <span class="tag">编程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程语言/">
                        <span class="tag">编程语言</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/脚本/">
                        <span class="tag">脚本</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/视频教程/">
                        <span class="tag">视频教程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/重载/">
                        <span class="tag">重载</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/01/12/写在十分简历发布前夕/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="写在十分简历发布前夕">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-12T10:52:00.000Z">2019-01-12</time></div>
                    <a href="/2019/01/12/写在十分简历发布前夕/" class="has-link-black-ter is-size-6">写在十分简历发布前夕</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/创业札记/">创业札记</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/07/09/kotlin/2018最新Kotlin基础视频教程上线了/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2018最新Kotlin基础视频教程上线了">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-07-09T07:02:00.000Z">2018-07-09</time></div>
                    <a href="/2018/07/09/kotlin/2018最新Kotlin基础视频教程上线了/" class="has-link-black-ter is-size-6">2018最新Kotlin基础视频教程上线了</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/04/27/kotlin/那些年，我们看不懂的那些Kotlin标准函数/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="那些年，我们看不懂的那些Kotlin标准函数">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-04-27T07:21:00.000Z">2018-04-27</time></div>
                    <a href="/2018/04/27/kotlin/那些年，我们看不懂的那些Kotlin标准函数/" class="has-link-black-ter is-size-6">那些年，我们看不懂的那些Kotlin标准函数</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/04/27/kotlin/测测你的Kotlin基础/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="测测你的Kotlin基础">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-04-27T07:09:00.000Z">2018-04-27</time></div>
                    <a href="/2018/04/27/kotlin/测测你的Kotlin基础/" class="has-link-black-ter is-size-6">测测你的Kotlin基础</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/04/27/kotlin/关于Kotlin抛弃可检测的异常处理，你怎么看？/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="关于Kotlin抛弃可检测的异常处理，你怎么看？">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-04-27T06:57:00.000Z">2018-04-27</time></div>
                    <a href="/2018/04/27/kotlin/关于Kotlin抛弃可检测的异常处理，你怎么看？/" class="has-link-black-ter is-size-6">关于Kotlin抛弃可检测的异常处理，你怎么看？</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Kotlin/">Kotlin</a> / <a class="has-link-grey -link" href="/categories/Kotlin/基础知识/">基础知识</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/2017/">
                        <span class="tag">2017</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Git/">
                        <span class="tag">Git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gradle/">
                        <span class="tag">Gradle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Groovy/">
                        <span class="tag">Groovy</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin/">
                        <span class="tag">Kotlin</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin基础/">
                        <span class="tag">Kotlin基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Markdown/">
                        <span class="tag">Markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/infix/">
                        <span class="tag">infix</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/object/">
                        <span class="tag">object</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/this/">
                        <span class="tag">this</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/代理属性/">
                        <span class="tag">代理属性</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/代理模式/">
                        <span class="tag">代理模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/关注/">
                        <span class="tag">关注</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/创业/">
                        <span class="tag">创业</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/前端/">
                        <span class="tag">前端</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态代理/">
                        <span class="tag">动态代理</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/十分简历/">
                        <span class="tag">十分简历</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/命令行/">
                        <span class="tag">命令行</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工作室/">
                        <span class="tag">工作室</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/延迟加载/">
                        <span class="tag">延迟加载</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开发工具/">
                        <span class="tag">开发工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源/">
                        <span class="tag">开源</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/总结/">
                        <span class="tag">总结</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/扩展/">
                        <span class="tag">扩展</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/操作符/">
                        <span class="tag">操作符</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/欧阳锋/">
                        <span class="tag">欧阳锋</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/泛型/">
                        <span class="tag">泛型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/深圳一行代码科技有限公司/">
                        <span class="tag">深圳一行代码科技有限公司</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/滑动返回/">
                        <span class="tag">滑动返回</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/版本控制工具/">
                        <span class="tag">版本控制工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/相对论/">
                        <span class="tag">相对论</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程/">
                        <span class="tag">编程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程语言/">
                        <span class="tag">编程语言</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/脚本/">
                        <span class="tag">脚本</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/视频教程/">
                        <span class="tag">视频教程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/重载/">
                        <span class="tag">重载</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="欧阳锋工作室" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 欧阳锋工作室&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/yuanhoujun">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>