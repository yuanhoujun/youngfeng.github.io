
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="欧阳锋工作室">
    <title>Kotlin 操作符重载及中缀调用 - 欧阳锋工作室</title>
    <meta name="author" content="欧阳锋工作室">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"欧阳锋工作室","sameAs":["https://github.com/yuanhoujun","assets/images/mpwexin.jpg","https://weibo.com/u/6140262139?is_all=1","mailto:ouyangfeng2016@gmail.com"],"image":"avatar.jpeg"},"articleBody":"\n\n操作符重载其实很有意思！但这个概念却很少有人知道，使用操作符重载在某种程度上会给代码的阅读带来一定的麻烦。因此，慎用操作符被认为是一个好习惯。的确，操作符重载是一把双刃剑，既能削铁如泥，也能“引火烧身”，这篇文章将从实用的角度来讲解操作符重载的基本用法。\n\n支持重载的操作符类型Kotlin语言支持重载的操作符类型比较多。以最新版本1.2.21为准，目前支持重载的操作符可以归纳为以下几类：\n一元操作符一元前缀操作符\n\n\n操作符\n对应方法\n\n\n\n\n+a\na.unaryPlus()\n\n\n-a\na.unaryMinus()\n\n\n!a\na.not()\n\n\n\n以上三个操作符在日常使用中频率很高，第一个操作符在基本运算中很少使用，第二个操作符就是常见的取反操作，第三个操作符是逻辑取反操作。接下来，我们使用扩展的方式重载这三个操作符：1234567891011121314151617181920212223242526272829303132333435363738394041/** * 一元操作符 * * @author Scott Smith 2018-02-03 14:11 */data class Number(var value: Int)/** * 重载一元操作符+，使其对Number中实际数据取绝对值 */operator fun Number.unaryPlus(): Number &#123;    this.value = Math.abs(value)    return this&#125;/** * 重载一元操作符-，使其对Number中实际数据取反 */operator fun Number.unaryMinus(): Number &#123;    this.value = -value    return this&#125;/** * 这个操作符通常是用于逻辑取反，这里用一个没有意义的操作，来模拟重载这个操作符 * 结果：始终返回Number中实际数据的负值 */operator fun Number.not(): Number &#123;    this.value = -Math.abs(value)    return this&#125;fun main(args: Array&lt;String&gt;) &#123;    val number = Number(-3)    println(&quot;Number value = $&#123;number.value&#125;&quot;)    println(&quot;After unaryPlus: Number value = $&#123;(+number).value&#125;&quot;)    println(&quot;After unaryMinus: Number value = $&#123;(-number).value&#125;&quot;)    number.value = Math.abs(number.value)    println(&quot;After unaryNot: Number value = $&#123;(!number).value&#125;&quot;)&#125;\n运行上述代码，将得到如下结果：1234Number value = -3After unaryPlus: Number value = 3After unaryMinus: Number value = -3After unaryNot: Number value = -3\n自增和自减操作符\n\n\n操作符\n对应方法\n\n\n\n\na++/++a\na.inc()\n\n\na–/–a\na.dec()\n\n\n\n重载这个操作符相对比较难理解，官方文档有一段简短的文字解释，翻译成代码可以这样表示：123456789101112// a++fun increment(a: Int): Int &#123;  val a0 = a  a = a + 1  return a0&#125;// ++afun increment(a: Int): Int &#123;  a = a + 1  return a&#125;\n看懂上面的代码后，我们换成需要重载的Number类，Kotlin最终会这样处理：1234567891011// Number++fun increment(number: Number): Number &#123;  val temp = number  val result = number.inc()  return result&#125;// Number++fun increment(number: Number): Number &#123;  return number.inc()&#125;\n因此，重载Number类自加操作符，我们可以这样做：123operator fun Number.inc(): Number &#123;    return Number(this.value + 1)&#125;\n重载自减操作符同理，完整代码请参考我的Git版本库：kotlin-samples\n二元操作符算术运算符\n\n\n操作符\n对应方法\n\n\n\n\na + b\na.plus(b)\n\n\na - b\na.minus(b)\n\n\na * b\na.times(b)\n\n\na / b\na.div(b)\n\n\na % b\na.rem(b)\n\n\na..b\na.rangeTo(b)\n\n\n\n前5个操作符相对比较好理解，我们以a + b为例，举个一个简单的例子：12345678910// 重载Number类的加法运算符operator fun Number.plus(value: Int): Number &#123;    return Number(this.value + value)&#125;fun main(args: Array&lt;String&gt;) &#123;       println((Number(1) + 2))&#125;// 输出结果：Number value = 3\n相对比较难理解的是第六个范围运算符，这个操作符主要用于生成一段数据范围。我们认为Number本身就代表一个整型数字，因此，重载Number是一件有意义的事情。直接看例子：123456789101112131415161718192021operator fun Number.rangeTo(to: Number): IntRange &#123;    return this.value..to.value&#125;fun main(args: Array&lt;String&gt;) &#123;    val startNumber = Number(3)    val endNumber = Number(9)    (startNumber..endNumber).forEach &#123;        println(&quot;value = $it&quot;)    &#125;&#125;// 运行结果：value = 3value = 4value = 5value = 6value = 7value = 8value = 9\n“In”运算符\n\n\n操作符\n对应方法\n\n\n\n\na in b\nb.contains(a)\n\n\na !in b\n!b.contains(a)\n\n\n\n这个操作符相对比较好理解，重载这个操作符可以用于判断某个数据是否在另外一个对象中。我们用一个非常简单的自定义类来模拟集合操作：1234567891011121314151617class IntCollection &#123;     val intList = ArrayList&lt;Int&gt;()&#125;// 重载&quot;in&quot;操作符operator fun IntCollection.contains(value: Int): Boolean &#123;    return this.intList.contains(value)&#125;fun main(args: Array&lt;String&gt;) &#123;    val intCollection = IntCollection()    intCollection.add(1, 2, 3)    println(3 in intCollection)&#125;// 输出结果：true\n索引访问运算符\n\n\n操作符\n对应方法\n\n\n\n\na[i]\na.get(i)\n\n\na[i, j]\na.get(i, j)\n\n\na[i_1, …, i_n]\na.get(i_1, …, i_n)\n\n\na[i] = b\na.set(i, b)\n\n\na[i, j] = b\na.set(i, j, b)\n\n\na[i_1, …, i_n] = b\na.set(i_1, …, i_n, b)\n\n\n\n这个操作符很有意思，例如，如果你要访问Map中某个数据，通常是这样的map.get(&quot;key&quot;)，使用索引运算符你还可以这样操作：1val value = map[&quot;key&quot;]\n我们继续以IntCollection类为例，尝试重写a[i]和a[i] = b两个运算符，其它运算符同理。123456789101112131415161718// 重载a[i]操作符operator fun IntCollection.get(index: Int): Int &#123;    return intList[index]&#125;// 重载a[i] = b操作符operator fun IntCollection.set(index: Int, value: Int) &#123;    intList[index] = value&#125;fun main(args: Array&lt;String&gt;) &#123;    val intCollection = IntCollection()    intCollection.add(1, 2, 3)    println(intCollection[0])    intCollection[2] = 4    print(intCollection[2])&#125;\n接下来，我们用索引运算符来做一点更有意思的事情！新建一个普通的Kotlin类User：1234class User(var name: String,           var age: Int) &#123;&#125;\n使用下面的方式重载索引运算符：1234567891011121314151617181920212223operator fun User.get(key: String): Any? &#123;    when(key) &#123;        &quot;name&quot; -&gt; &#123;            return this.name        &#125;        &quot;age&quot; -&gt; &#123;            return this.age        &#125;    &#125;    return null&#125;operator fun User.set(key: String, value:Any?) &#123;    when(key) &#123;        &quot;name&quot; -&gt; &#123;            name = value as? String        &#125;        &quot;age&quot; -&gt; &#123;            age = value as? Int        &#125;    &#125;&#125;\n接下来，你会神奇地发现，一个普通的Kotlin类居然也可以使用索引运算符对成员变量进行操作了，是不是很神奇？123456fun main(args: Array&lt;String&gt;) &#123;    val user = User(&quot;Scott Smith&quot;, 18)    println(user[&quot;name&quot;])    user[&quot;age&quot;] = 22    println(user[&quot;age&quot;])&#125;\n因此，索引运算符不仅仅可以对集合类数据进行操作，对一个普通的Kotlin类也可以发挥同样的作用。如果你脑洞足够大，你还可以发现更多更神奇的玩法。\n调用操作符\n\n\n操作符\n对应方法\n\n\n\n\na()\na.invoke()\n\n\na(i)\na.invoke(i)\n\n\na(i, j)\na.invoke(i, j)\n\n\na(i_1, ……, i_n)\na.invoke(i_1, ……, i_n)\n\n\n\n重载这个操作符并不难，理解它的应用场景却有一定的难度。为了理解它的应用场景，我们来举一个简单的例子：12345678910111213class JsonParser &#123;&#125;operator fun JsonParser.invoke(json: String): Map&lt;String, Any&gt; &#123;    val map = Json.parse(json)    ...    return map&#125;// 可以这样调用val parser = JsonParser()val map = parser(&quot;&#123;name: \\&quot;Scott Smith\\&quot;&#125;&quot;)\n这里的调用有点像省略了一个解析Json数据的方法，难道它仅仅就是这个作用吗？是的，调用操作符其实就这一个作用。如果一个Kotlin类仅仅只有一个方法，直接使用括号调用的确是一个不错的主意。不过，在使用的时候还是要稍微注意一下，避免出现歧义。\n广义赋值操作符\n\n\n操作符\n对应方法\n\n\n\n\na += b\na.plusAssign(b)\n\n\na -= b\na.minusAssign(b)\n\n\na *= b\na.timesAssign(b)\n\n\na /= b\na.divAssign(b)\n\n\na %= b\na.remAssign(b)\n\n\n\n这个操作符相对比较好理解，我们以Number类为例，举一个简单的例子：12345678910111213// 广义赋值运算符operator fun Number.plusAssign(value: Int) &#123;    this.value += value&#125;fun main(args: Array&lt;String&gt;) &#123;    val number = Number(1)    number += 2    println(number)&#125;// 输出结果：Number value = 3\n相等与不等操作符\n\n\n操作符\n对应方法\n\n\n\n\na == b\na?.equals(b) ?: (b === null)\n\n\na != b\n!(a?.equals(b) ?: (b === null))\n\n\n\n重载这个操作符与Java重写equals方法是一样的。不过，这里要注意与Java的区别，在Java端==用于判断两个对象是否是同一对象（指针级别）。而在Kotlin语言中，如果我们不做任何处理，==等同于使用Java对象的equals方法判断两个对象是否相等。\n另外，这里还有一种特殊情况，如果左值等于null，这个时候a?.equals(b)将返回null值。因此，这里还增加了?:运算符用于进一步判断，在这个情况下，当且仅当b === null的时候，a、b才有可能相等。因此，才有了上面的对应关系，这里以User类为例举一个简单的例子：12345678910class User(var name: String?,           var age: Int?) &#123;    operator override fun equals(other: Any?): Boolean &#123;        if(other is User) &#123;            return (this.name == other.name) &amp;&amp; (this.age == other.age)        &#125;        return false    &#125;&#125;\n注意：这里有一个特殊的地方，与其它操作符不一样的地方是，如果使用扩展的方式尝试重载该操作符，将会报错。因此，如果要重载该操作符，一定要在类中进行重写。\n比较操作符\n\n\n操作符\n对应方法\n\n\n\n\na &gt; b\na.compareTo(b) &gt; 0\n\n\na &lt; b\na.compareTo(b) &lt; 0\n\n\na &gt;= b\na.compareTo(b) &gt;= 0\n\n\na &lt;= b\na.compareTo(b) &lt;= 0\n\n\n\n比较操作符是一个在日常使用中频率非常高的操作符，重载这个操作符只需要掌握以上表格中几个规则即可。我们以Number类为例举一个简单的例子：123operator fun Number.compareTo(number: Number): Int &#123;    return this.value - number.value&#125;\n属性委托操作符属性委托操作符是一种非常特殊的操作符，其主要用在代理属性中。关于Kotlin代理的知识，如果你还不了解的话，请参考这篇文章 Delegation。这篇文章介绍的相对简略，后面会出一篇更详细的文章介绍代理相关的知识。\n中缀调用看到这里，可能有一些追求更高级玩法的同学会问：Kotlin支持自定义操作符吗？\n答案当然是：不能！不过，别失望，infix也许适合你，它其实可以看做一种自定义操作符的实现。这里我们对集合List新增一个扩展方法intersection用于获取两个集合的交集：1234567891011// 获取两个集合的交集fun &lt;E&gt; List&lt;E&gt;.interSection(other: List&lt;E&gt;): List&lt;E&gt; &#123;    val result = ArrayList&lt;E&gt;()    forEach &#123;        if(other.contains(it)) &#123;            result.add(it)        &#125;    &#125;    return result&#125;\n接下来，我们就可以在List及其子类中使用点语法调用了。但，它看起来仍然不像一个操作符。为了让它更像一个操作符，我们继续做点事情：\n\n添加infix关键词\n将函数名修改为∩（这是数学上获取交集的标记符号）然而，万万没想到，修改完成后居然报错了。Kotlin并不允许直接使用特殊符号作为函数名开头。因此，我们取形近的字母n用于表示函数名：1234567891011// 获取两个集合的交集infix fun &lt;E&gt; List&lt;E&gt;.n(other: List&lt;E&gt;): List&lt;E&gt; &#123;    val result = ArrayList&lt;E&gt;()    forEach &#123;        if(other.contains(it)) &#123;            result.add(it)        &#125;    &#125;    return result&#125;\n\n\n接下来，我们就可以这样调用了val interSection = list1 n list2，怎么样？是不是很像自定义了一个获取交集的操作符n？如果你希望自定义操作符，可以尝试这么做。\n其实infix的应用场景还不止这些，接下来，我们再用它完成一件更有意思的事情。\n在实际项目开发中，数据库数据到对象的处理是一件繁琐的过程，最麻烦的地方莫过于思维的转换。那我们是否可以在代码中直接使用SQL语句查询对象数据呢？例如这样：1val users = Select * from User where age &gt; 18\n纸上学来终觉浅，觉知此事需躬行。有了这个idea，接下来，我们就朝着这个目标努力。一、先声明一个Sql类，准备如下方法：1234567infix fun select(columnBuilder: ColumnBuilder): Sql &#123;infix fun from(entityClass: Class&lt;*&gt;): Sql infix fun where(condition: String): Sql fun &lt;T&gt; query(): T\n二、我们的目的是：最终转换到SQL语句形式。因此，增加如下实现：12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758class ColumnBuilder(var columns: Array&lt;out String&gt;) &#123;&#125;class Sql private constructor() &#123;    var columns = emptyList&lt;String&gt;()    var entityClass: Class&lt;*&gt;? = null    var condition: String? = null    companion object &#123;        fun get(): Sql &#123;            return Sql()        &#125;    &#125;    infix fun select(columnBuilder: ColumnBuilder): Sql &#123;        this.columns = columnBuilder.columns.asList()        return this    &#125;    infix fun from(entityClass: Class&lt;*&gt;): Sql &#123;        this.entityClass = entityClass        return this    &#125;    infix fun where(condition: String): Sql &#123;        this.condition = condition        return this    &#125;    fun &lt;T&gt; query(): T &#123;        // 此处省略所有条件判断        val sqlBuilder = StringBuilder(&quot;select &quot;)        val columnBuilder = StringBuilder(&quot;&quot;)        if(columns.size == 1 &amp;&amp; columns[0] == &quot;*&quot;) &#123;            columnBuilder.append(&quot;*&quot;)        &#125; else &#123;            columns.forEach &#123;                columnBuilder.append(it).append(&quot;,&quot;)            &#125;            columnBuilder.delete(columns.size - 1, columns.size)        &#125;        val sql = sqlBuilder.append(columnBuilder.toString())                            .append(&quot; from $&#123;entityClass?.simpleName&#125; where &quot;)                            .append(condition)                            .toString()        println(&quot;执行SQL查询：$sql&quot;)        return execute(sql)    &#125;    private fun &lt;T&gt; execute(sql: String): T &#123;        // 仅仅用于测试        return Any() as T    &#125;&#125;\n三、为了看起来更形似，再增加如下两个方法：123456789// 使其看起来像在数据库作用域中执行fun database(init: Sql.()-&gt;Unit) &#123;    init.invoke(Sql.get())&#125;// 因为infix限制，参数不能直接使用可变参数。因此，我们增加这个方法使参数组装看起来更自然fun columns(vararg columns: String): ColumnBuilder &#123;    return ColumnBuilder(columns)&#125;\n接下来，就是见证奇迹的时刻！12345678fun main(args: Array&lt;String&gt;) &#123;    database &#123;        (select (columns(&quot;*&quot;)) from User::class.java where &quot;age &gt; 18&quot;).query()    &#125;&#125;// 输出结果：执行SQL查询：select * from User where age &gt; 18\n为了方便大家查看，我们提取完整执行代码段与SQL语句对比：12select          *       from User             where  age &gt; 18select  (columns(&quot;*&quot;))  from User::class.java where &quot;age &gt; 18&quot;\n神奇吗？至此，我们就可以直接在代码中愉快地使用类似SQL语句的方式进行方法调用了。\n总结本篇文章从操作符重载实用的角度讲解了操作符重载的所有相关知识。如文章开头所说，操作符重载是一把双刃剑。用得好事半功倍，用不好事倍功半。因此，我给大家的建议是：使用的时候一定要保证能够自圆其说，简单来说，就是自然。我认为相对于古老的语言C++来说，Kotlin语言操作符重载的设计是非常棒的。如果你知道自己在做什么，我非常推荐你在生产环境中使用操作符重载来简化操作。\n本篇文章例子代码点这里：kotlin-samples\n\n我是欧阳锋，一个热爱Kotlin语言编程的学生。如果你喜欢我的文章，请在文章下方留下你爱的印记。如果你不喜欢我的文章，请先喜欢上我的文章。然后再留下爱的印记！\n下次文章再见，拜拜！\n\n","dateCreated":"2018-02-06T11:39:00+08:00","dateModified":"2019-04-28T20:46:52+08:00","datePublished":"2018-02-06T11:39:00+08:00","description":"","headline":"Kotlin 操作符重载及中缀调用","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/"},"publisher":{"@type":"Organization","name":"欧阳锋工作室","sameAs":["https://github.com/yuanhoujun","assets/images/mpwexin.jpg","https://weibo.com/u/6140262139?is_all=1","mailto:ouyangfeng2016@gmail.com"],"image":"avatar.jpeg","logo":{"@type":"ImageObject","url":"avatar.jpeg"}},"url":"http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/","keywords":"Android, Kotlin, 操作符, 重载, infix"}</script>
    <meta name="description" content="操作符重载其实很有意思！但这个概念却很少有人知道，使用操作符重载在某种程度上会给代码的阅读带来一定的麻烦。因此，慎用操作符被认为是一个好习惯。的确，操作符重载是一把双刃剑，既能削铁如泥，也能“引火烧身”，这篇文章将从实用的角度来讲解操作符重载的基本用法。  支持重载的操作符类型Kotlin语言支持重载的操作符类型比较多。以最新版本1.2.21为准，目前支持重载的操作符可以归纳为以下几类： 一元">
<meta name="keywords" content="Android,Kotlin,操作符,重载,infix">
<meta property="og:type" content="blog">
<meta property="og:title" content="Kotlin 操作符重载及中缀调用">
<meta property="og:url" content="http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/index.html">
<meta property="og:site_name" content="欧阳锋工作室">
<meta property="og:description" content="操作符重载其实很有意思！但这个概念却很少有人知道，使用操作符重载在某种程度上会给代码的阅读带来一定的麻烦。因此，慎用操作符被认为是一个好习惯。的确，操作符重载是一把双刃剑，既能削铁如泥，也能“引火烧身”，这篇文章将从实用的角度来讲解操作符重载的基本用法。  支持重载的操作符类型Kotlin语言支持重载的操作符类型比较多。以最新版本1.2.21为准，目前支持重载的操作符可以归纳为以下几类： 一元">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/703764-0baf2dcfb0baa84f.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2019-04-28T12:46:52.218Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kotlin 操作符重载及中缀调用">
<meta name="twitter:description" content="操作符重载其实很有意思！但这个概念却很少有人知道，使用操作符重载在某种程度上会给代码的阅读带来一定的麻烦。因此，慎用操作符被认为是一个好习惯。的确，操作符重载是一把双刃剑，既能削铁如泥，也能“引火烧身”，这篇文章将从实用的角度来讲解操作符重载的基本用法。  支持重载的操作符类型Kotlin语言支持重载的操作符类型比较多。以最新版本1.2.21为准，目前支持重载的操作符可以归纳为以下几类： 一元">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/703764-0baf2dcfb0baa84f.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
    
    
        
    
    
        <meta property="og:image" content="http://youngfeng.com/assets/images/avatar.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-n3h5fvwrba2ezx3jjewg1itrl3r4ognmb0rqhxoh9kr7ltfomtbpdedrggqw.min.css">
    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            欧阳锋工作室
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.jpeg" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpeg" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">欧阳锋工作室</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Stay hungry, stay foolish</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="首页"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="分类"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="标签"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="归档"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/about"
                            
                            title="关于"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/yuanhoujun" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/assets/images/mpwexin.jpg"
                            title="微信公众号"
                        >
                    
                        <i class="sidebar-button-icon fab fa-weixin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">微信公众号</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://weibo.com/u/6140262139?is_all=1" target="_blank" rel="noopener" title="微博">
                    
                        <i class="sidebar-button-icon fab fa-weibo" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">微博</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:ouyangfeng2016@gmail.com" target="_blank" rel="noopener" title="邮箱">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Kotlin 操作符重载及中缀调用
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2018-02-06T11:39:00+08:00">
	
		    2月 06, 2018
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/Kotlin/">Kotlin</a>, <a class="category-link" href="/categories/Kotlin/基础知识/">基础知识</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p><img src="http://upload-images.jianshu.io/upload_images/703764-0baf2dcfb0baa84f.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<blockquote>
<p>操作符重载其实很有意思！但这个概念却很少有人知道，使用操作符重载在某种程度上会给代码的阅读带来一定的麻烦。因此，慎用操作符被认为是一个好习惯。的确，操作符重载是一把双刃剑，既能削铁如泥，也能“引火烧身”，这篇文章将从实用的角度来讲解操作符重载的基本用法。</p>
</blockquote>
<h1 id="支持重载的操作符类型"><a href="#支持重载的操作符类型" class="headerlink" title="支持重载的操作符类型"></a>支持重载的操作符类型</h1><p>Kotlin语言支持重载的操作符类型比较多。以最新版本<strong>1.2.21</strong>为准，目前支持重载的操作符可以归纳为以下几类：</p>
<h1 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h1><h4 id="一元前缀操作符"><a href="#一元前缀操作符" class="headerlink" title="一元前缀操作符"></a>一元前缀操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+a</td>
<td style="text-align:center">a.unaryPlus()</td>
</tr>
<tr>
<td style="text-align:center">-a</td>
<td style="text-align:center">a.unaryMinus()</td>
</tr>
<tr>
<td style="text-align:center">!a</td>
<td style="text-align:center">a.not()</td>
</tr>
</tbody>
</table>
<p>以上三个操作符在日常使用中频率很高，第一个操作符在基本运算中很少使用，第二个操作符就是常见的取反操作，第三个操作符是逻辑取反操作。接下来，我们使用扩展的方式重载这三个操作符：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 一元操作符</span><br><span class="line"> *</span><br><span class="line"> * @author Scott Smith 2018-02-03 14:11</span><br><span class="line"> */</span><br><span class="line">data class Number(var value: Int)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 重载一元操作符+，使其对Number中实际数据取绝对值</span><br><span class="line"> */</span><br><span class="line">operator fun Number.unaryPlus(): Number &#123;</span><br><span class="line">    this.value = Math.abs(value)</span><br><span class="line">    return this</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 重载一元操作符-，使其对Number中实际数据取反</span><br><span class="line"> */</span><br><span class="line">operator fun Number.unaryMinus(): Number &#123;</span><br><span class="line">    this.value = -value</span><br><span class="line">    return this</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 这个操作符通常是用于逻辑取反，这里用一个没有意义的操作，来模拟重载这个操作符</span><br><span class="line"> * 结果：始终返回Number中实际数据的负值</span><br><span class="line"> */</span><br><span class="line">operator fun Number.not(): Number &#123;</span><br><span class="line">    this.value = -Math.abs(value)</span><br><span class="line">    return this</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val number = Number(-3)</span><br><span class="line">    println(&quot;Number value = $&#123;number.value&#125;&quot;)</span><br><span class="line">    println(&quot;After unaryPlus: Number value = $&#123;(+number).value&#125;&quot;)</span><br><span class="line">    println(&quot;After unaryMinus: Number value = $&#123;(-number).value&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    number.value = Math.abs(number.value)</span><br><span class="line">    println(&quot;After unaryNot: Number value = $&#123;(!number).value&#125;&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行上述代码，将得到如下结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Number value = -3</span><br><span class="line">After unaryPlus: Number value = 3</span><br><span class="line">After unaryMinus: Number value = -3</span><br><span class="line">After unaryNot: Number value = -3</span><br></pre></td></tr></table></figure></p>
<h4 id="自增和自减操作符"><a href="#自增和自减操作符" class="headerlink" title="自增和自减操作符"></a>自增和自减操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a++/++a</td>
<td style="text-align:center">a.inc()</td>
</tr>
<tr>
<td style="text-align:center">a–/–a</td>
<td style="text-align:center">a.dec()</td>
</tr>
</tbody>
</table>
<p>重载这个操作符相对比较难理解，官方文档有一段简短的文字解释，翻译成代码可以这样表示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// a++</span><br><span class="line">fun increment(a: Int): Int &#123;</span><br><span class="line">  val a0 = a</span><br><span class="line">  a = a + 1</span><br><span class="line">  return a0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ++a</span><br><span class="line">fun increment(a: Int): Int &#123;</span><br><span class="line">  a = a + 1</span><br><span class="line">  return a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>看懂上面的代码后，我们换成需要重载的<code>Number</code>类，Kotlin最终会这样处理：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Number++</span><br><span class="line">fun increment(number: Number): Number &#123;</span><br><span class="line">  val temp = number</span><br><span class="line">  val result = number.inc()</span><br><span class="line">  return result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Number++</span><br><span class="line">fun increment(number: Number): Number &#123;</span><br><span class="line">  return number.inc()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>因此，重载<code>Number</code>类自加操作符，我们可以这样做：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">operator fun Number.inc(): Number &#123;</span><br><span class="line">    return Number(this.value + 1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>重载自减操作符同理，完整代码请参考我的Git版本库：<a href="https://github.com/yuanhoujun/kotlin-samples" target="_blank" rel="noopener">kotlin-samples</a></p>
<h1 id="二元操作符"><a href="#二元操作符" class="headerlink" title="二元操作符"></a>二元操作符</h1><h4 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a + b</td>
<td style="text-align:center">a.plus(b)</td>
</tr>
<tr>
<td style="text-align:center">a - b</td>
<td style="text-align:center">a.minus(b)</td>
</tr>
<tr>
<td style="text-align:center">a * b</td>
<td style="text-align:center">a.times(b)</td>
</tr>
<tr>
<td style="text-align:center">a / b</td>
<td style="text-align:center">a.div(b)</td>
</tr>
<tr>
<td style="text-align:center">a % b</td>
<td style="text-align:center">a.rem(b)</td>
</tr>
<tr>
<td style="text-align:center">a..b</td>
<td style="text-align:center">a.rangeTo(b)</td>
</tr>
</tbody>
</table>
<p>前5个操作符相对比较好理解，我们以<code>a + b</code>为例，举个一个简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 重载Number类的加法运算符</span><br><span class="line">operator fun Number.plus(value: Int): Number &#123;</span><br><span class="line">    return Number(this.value + value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">       println((Number(1) + 2))</span><br><span class="line">&#125;</span><br><span class="line">// 输出结果：</span><br><span class="line">Number value = 3</span><br></pre></td></tr></table></figure></p>
<p>相对比较难理解的是第六个范围运算符，这个操作符主要用于生成一段数据范围。我们认为<code>Number</code>本身就代表一个整型数字，因此，重载<code>Number</code>是一件有意义的事情。直接看例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">operator fun Number.rangeTo(to: Number): IntRange &#123;</span><br><span class="line">    return this.value..to.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val startNumber = Number(3)</span><br><span class="line">    val endNumber = Number(9)</span><br><span class="line"></span><br><span class="line">    (startNumber..endNumber).forEach &#123;</span><br><span class="line">        println(&quot;value = $it&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 运行结果：</span><br><span class="line">value = 3</span><br><span class="line">value = 4</span><br><span class="line">value = 5</span><br><span class="line">value = 6</span><br><span class="line">value = 7</span><br><span class="line">value = 8</span><br><span class="line">value = 9</span><br></pre></td></tr></table></figure></p>
<h4 id="“In”运算符"><a href="#“In”运算符" class="headerlink" title="“In”运算符"></a>“In”运算符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a in b</td>
<td style="text-align:center">b.contains(a)</td>
</tr>
<tr>
<td style="text-align:center">a !in b</td>
<td style="text-align:center">!b.contains(a)</td>
</tr>
</tbody>
</table>
<p>这个操作符相对比较好理解，重载这个操作符可以用于判断某个数据是否在另外一个对象中。我们用一个非常简单的自定义类来模拟集合操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class IntCollection &#123; </span><br><span class="line">    val intList = ArrayList&lt;Int&gt;()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 重载&quot;in&quot;操作符</span><br><span class="line">operator fun IntCollection.contains(value: Int): Boolean &#123;</span><br><span class="line">    return this.intList.contains(value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val intCollection = IntCollection()</span><br><span class="line">    intCollection.add(1, 2, 3)</span><br><span class="line">    println(3 in intCollection)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出结果：</span><br><span class="line">true</span><br></pre></td></tr></table></figure></p>
<h4 id="索引访问运算符"><a href="#索引访问运算符" class="headerlink" title="索引访问运算符"></a>索引访问运算符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a[i]</td>
<td style="text-align:center">a.get(i)</td>
</tr>
<tr>
<td style="text-align:center">a[i, j]</td>
<td style="text-align:center">a.get(i, j)</td>
</tr>
<tr>
<td style="text-align:center">a[i_1, …, i_n]</td>
<td style="text-align:center">a.get(i_1, …, i_n)</td>
</tr>
<tr>
<td style="text-align:center">a[i] = b</td>
<td style="text-align:center">a.set(i, b)</td>
</tr>
<tr>
<td style="text-align:center">a[i, j] = b</td>
<td style="text-align:center">a.set(i, j, b)</td>
</tr>
<tr>
<td style="text-align:center">a[i_1, …, i_n] = b</td>
<td style="text-align:center">a.set(i_1, …, i_n, b)</td>
</tr>
</tbody>
</table>
<p>这个操作符很有意思，例如，如果你要访问Map中某个数据，通常是这样的<code>map.get(&quot;key&quot;)</code>，使用索引运算符你还可以这样操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val value = map[&quot;key&quot;]</span><br></pre></td></tr></table></figure></p>
<p>我们继续以<code>IntCollection</code>类为例，尝试重写<code>a[i]</code>和<code>a[i] = b</code>两个运算符，其它运算符同理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 重载a[i]操作符</span><br><span class="line">operator fun IntCollection.get(index: Int): Int &#123;</span><br><span class="line">    return intList[index]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 重载a[i] = b操作符</span><br><span class="line">operator fun IntCollection.set(index: Int, value: Int) &#123;</span><br><span class="line">    intList[index] = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val intCollection = IntCollection()</span><br><span class="line">    intCollection.add(1, 2, 3)</span><br><span class="line">    println(intCollection[0])</span><br><span class="line"></span><br><span class="line">    intCollection[2] = 4</span><br><span class="line">    print(intCollection[2])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，我们用索引运算符来做一点更有意思的事情！新建一个普通的<code>Kotlin</code>类<code>User</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class User(var name: String,</span><br><span class="line">           var age: Int) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用下面的方式重载索引运算符：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">operator fun User.get(key: String): Any? &#123;</span><br><span class="line">    when(key) &#123;</span><br><span class="line">        &quot;name&quot; -&gt; &#123;</span><br><span class="line">            return this.name</span><br><span class="line">        &#125;</span><br><span class="line">        &quot;age&quot; -&gt; &#123;</span><br><span class="line">            return this.age</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">operator fun User.set(key: String, value:Any?) &#123;</span><br><span class="line">    when(key) &#123;</span><br><span class="line">        &quot;name&quot; -&gt; &#123;</span><br><span class="line">            name = value as? String</span><br><span class="line">        &#125;</span><br><span class="line">        &quot;age&quot; -&gt; &#123;</span><br><span class="line">            age = value as? Int</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，你会神奇地发现，一个普通的<code>Kotlin</code>类居然也可以使用索引运算符对成员变量进行操作了，是不是很神奇？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val user = User(&quot;Scott Smith&quot;, 18)</span><br><span class="line">    println(user[&quot;name&quot;])</span><br><span class="line">    user[&quot;age&quot;] = 22</span><br><span class="line">    println(user[&quot;age&quot;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>因此，索引运算符不仅仅可以对集合类数据进行操作，对一个普通的<code>Kotlin</code>类也可以发挥同样的作用。如果你脑洞足够大，你还可以发现更多更神奇的玩法。</p>
<h4 id="调用操作符"><a href="#调用操作符" class="headerlink" title="调用操作符"></a>调用操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a()</td>
<td style="text-align:center">a.invoke()</td>
</tr>
<tr>
<td style="text-align:center">a(i)</td>
<td style="text-align:center">a.invoke(i)</td>
</tr>
<tr>
<td style="text-align:center">a(i, j)</td>
<td style="text-align:center">a.invoke(i, j)</td>
</tr>
<tr>
<td style="text-align:center">a(i_1, ……, i_n)</td>
<td style="text-align:center">a.invoke(i_1, ……, i_n)</td>
</tr>
</tbody>
</table>
<p>重载这个操作符并不难，理解它的应用场景却有一定的难度。为了理解它的应用场景，我们来举一个简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class JsonParser &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">operator fun JsonParser.invoke(json: String): Map&lt;String, Any&gt; &#123;</span><br><span class="line">    val map = Json.parse(json)</span><br><span class="line">    ...</span><br><span class="line">    return map</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 可以这样调用</span><br><span class="line">val parser = JsonParser()</span><br><span class="line">val map = parser(&quot;&#123;name: \&quot;Scott Smith\&quot;&#125;&quot;)</span><br></pre></td></tr></table></figure></p>
<p>这里的调用有点像省略了一个解析Json数据的方法，难道它仅仅就是这个作用吗？是的，调用操作符其实就这一个作用。如果一个Kotlin类仅仅只有一个方法，直接使用括号调用的确是一个不错的主意。不过，在使用的时候还是要稍微注意一下，避免出现歧义。</p>
<h4 id="广义赋值操作符"><a href="#广义赋值操作符" class="headerlink" title="广义赋值操作符"></a>广义赋值操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a += b</td>
<td style="text-align:center">a.plusAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a -= b</td>
<td style="text-align:center">a.minusAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a *= b</td>
<td style="text-align:center">a.timesAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a /= b</td>
<td style="text-align:center">a.divAssign(b)</td>
</tr>
<tr>
<td style="text-align:center">a %= b</td>
<td style="text-align:center">a.remAssign(b)</td>
</tr>
</tbody>
</table>
<p>这个操作符相对比较好理解，我们以<code>Number</code>类为例，举一个简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 广义赋值运算符</span><br><span class="line">operator fun Number.plusAssign(value: Int) &#123;</span><br><span class="line">    this.value += value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val number = Number(1)</span><br><span class="line">    number += 2</span><br><span class="line">    println(number)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出结果：</span><br><span class="line">Number value = 3</span><br></pre></td></tr></table></figure></p>
<h4 id="相等与不等操作符"><a href="#相等与不等操作符" class="headerlink" title="相等与不等操作符"></a>相等与不等操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a == b</td>
<td style="text-align:center">a?.equals(b) ?: (b === null)</td>
</tr>
<tr>
<td style="text-align:center">a != b</td>
<td style="text-align:center">!(a?.equals(b) ?: (b === null))</td>
</tr>
</tbody>
</table>
<p>重载这个操作符与Java重写equals方法是一样的。不过，这里要注意与Java的区别，在Java端<code>==</code>用于判断两个对象是否是同一对象（指针级别）。而在Kotlin语言中，如果我们不做任何处理，<code>==</code>等同于使用Java对象的<code>equals</code>方法判断两个对象是否相等。</p>
<p>另外，这里还有一种特殊情况，如果左值等于null，这个时候<code>a?.equals(b)</code>将返回null值。因此，这里还增加了<code>?:</code>运算符用于进一步判断，在这个情况下，当且仅当b === null的时候，a、b才有可能相等。因此，才有了上面的对应关系，这里以<code>User</code>类为例举一个简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class User(var name: String?,</span><br><span class="line">           var age: Int?) &#123;</span><br><span class="line"></span><br><span class="line">    operator override fun equals(other: Any?): Boolean &#123;</span><br><span class="line">        if(other is User) &#123;</span><br><span class="line">            return (this.name == other.name) &amp;&amp; (this.age == other.age)</span><br><span class="line">        &#125;</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：这里有一个特殊的地方，与其它操作符不一样的地方是，如果使用扩展的方式尝试重载该操作符，将会报错。因此，如果要重载该操作符，一定要在类中进行重写。</p>
<h4 id="比较操作符"><a href="#比较操作符" class="headerlink" title="比较操作符"></a>比较操作符</h4><table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:center">对应方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a &gt; b</td>
<td style="text-align:center">a.compareTo(b) &gt; 0</td>
</tr>
<tr>
<td style="text-align:center">a &lt; b</td>
<td style="text-align:center">a.compareTo(b) &lt; 0</td>
</tr>
<tr>
<td style="text-align:center">a &gt;= b</td>
<td style="text-align:center">a.compareTo(b) &gt;= 0</td>
</tr>
<tr>
<td style="text-align:center">a &lt;= b</td>
<td style="text-align:center">a.compareTo(b) &lt;= 0</td>
</tr>
</tbody>
</table>
<p>比较操作符是一个在日常使用中频率非常高的操作符，重载这个操作符只需要掌握以上表格中几个规则即可。我们以<code>Number</code>类为例举一个简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">operator fun Number.compareTo(number: Number): Int &#123;</span><br><span class="line">    return this.value - number.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="属性委托操作符"><a href="#属性委托操作符" class="headerlink" title="属性委托操作符"></a>属性委托操作符</h4><p><strong>属性委托操作符</strong>是一种非常特殊的操作符，其主要用在代理属性中。关于Kotlin代理的知识，如果你还不了解的话，请参考这篇文章<br> <a href="https://www.jianshu.com/p/54a57aac11e6" target="_blank" rel="noopener">Delegation</a>。这篇文章介绍的相对简略，后面会出一篇更详细的文章介绍代理相关的知识。</p>
<h4 id="中缀调用"><a href="#中缀调用" class="headerlink" title="中缀调用"></a>中缀调用</h4><p>看到这里，可能有一些追求更高级玩法的同学会问：Kotlin支持自定义操作符吗？</p>
<p>答案当然是：不能！不过，别失望，<code>infix</code>也许适合你，它其实可以看做一种自定义操作符的实现。这里我们对集合<code>List</code>新增一个扩展方法<code>intersection</code>用于获取两个集合的交集：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 获取两个集合的交集</span><br><span class="line">fun &lt;E&gt; List&lt;E&gt;.interSection(other: List&lt;E&gt;): List&lt;E&gt; &#123;</span><br><span class="line">    val result = ArrayList&lt;E&gt;()</span><br><span class="line">    forEach &#123;</span><br><span class="line">        if(other.contains(it)) &#123;</span><br><span class="line">            result.add(it)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，我们就可以在<code>List</code>及其子类中使用点语法调用了。但，它看起来仍然不像一个操作符。为了让它更像一个操作符，我们继续做点事情：</p>
<ul>
<li>添加<code>infix</code>关键词</li>
<li>将函数名修改为∩（这是数学上获取交集的标记符号）<br>然而，万万没想到，修改完成后居然报错了。Kotlin并不允许直接使用特殊符号作为函数名开头。因此，我们取形近的字母<code>n</code>用于表示函数名：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 获取两个集合的交集</span><br><span class="line">infix fun &lt;E&gt; List&lt;E&gt;.n(other: List&lt;E&gt;): List&lt;E&gt; &#123;</span><br><span class="line">    val result = ArrayList&lt;E&gt;()</span><br><span class="line">    forEach &#123;</span><br><span class="line">        if(other.contains(it)) &#123;</span><br><span class="line">            result.add(it)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>接下来，我们就可以这样调用了<code>val interSection = list1 n list2</code>，怎么样？是不是很像自定义了一个获取交集的操作符<code>n</code>？如果你希望自定义操作符，可以尝试这么做。</p>
<p>其实<code>infix</code>的应用场景还不止这些，接下来，我们再用它完成一件更有意思的事情。</p>
<p>在实际项目开发中，数据库数据到对象的处理是一件繁琐的过程，最麻烦的地方莫过于思维的转换。那我们是否可以在代码中直接使用SQL语句查询对象数据呢？例如这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val users = Select * from User where age &gt; 18</span><br></pre></td></tr></table></figure></p>
<p>纸上学来终觉浅，觉知此事需躬行。有了这个idea，接下来，我们就朝着这个目标努力。<br>一、先声明一个<code>Sql</code>类，准备如下方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">infix fun select(columnBuilder: ColumnBuilder): Sql &#123;</span><br><span class="line"></span><br><span class="line">infix fun from(entityClass: Class&lt;*&gt;): Sql </span><br><span class="line"></span><br><span class="line">infix fun where(condition: String): Sql </span><br><span class="line"></span><br><span class="line">fun &lt;T&gt; query(): T</span><br></pre></td></tr></table></figure></p>
<p>二、我们的目的是：最终转换到SQL语句形式。因此，增加如下实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">class ColumnBuilder(var columns: Array&lt;out String&gt;) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Sql private constructor() &#123;</span><br><span class="line">    var columns = emptyList&lt;String&gt;()</span><br><span class="line">    var entityClass: Class&lt;*&gt;? = null</span><br><span class="line">    var condition: String? = null</span><br><span class="line"></span><br><span class="line">    companion object &#123;</span><br><span class="line">        fun get(): Sql &#123;</span><br><span class="line">            return Sql()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    infix fun select(columnBuilder: ColumnBuilder): Sql &#123;</span><br><span class="line">        this.columns = columnBuilder.columns.asList()</span><br><span class="line">        return this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    infix fun from(entityClass: Class&lt;*&gt;): Sql &#123;</span><br><span class="line">        this.entityClass = entityClass</span><br><span class="line">        return this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    infix fun where(condition: String): Sql &#123;</span><br><span class="line">        this.condition = condition</span><br><span class="line">        return this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun &lt;T&gt; query(): T &#123;</span><br><span class="line">        // 此处省略所有条件判断</span><br><span class="line">        val sqlBuilder = StringBuilder(&quot;select &quot;)</span><br><span class="line"></span><br><span class="line">        val columnBuilder = StringBuilder(&quot;&quot;)</span><br><span class="line">        if(columns.size == 1 &amp;&amp; columns[0] == &quot;*&quot;) &#123;</span><br><span class="line">            columnBuilder.append(&quot;*&quot;)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            columns.forEach &#123;</span><br><span class="line">                columnBuilder.append(it).append(&quot;,&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">            columnBuilder.delete(columns.size - 1, columns.size)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        val sql = sqlBuilder.append(columnBuilder.toString())</span><br><span class="line">                            .append(&quot; from $&#123;entityClass?.simpleName&#125; where &quot;)</span><br><span class="line">                            .append(condition)</span><br><span class="line">                            .toString()</span><br><span class="line">        println(&quot;执行SQL查询：$sql&quot;)</span><br><span class="line"></span><br><span class="line">        return execute(sql)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun &lt;T&gt; execute(sql: String): T &#123;</span><br><span class="line">        // 仅仅用于测试</span><br><span class="line">        return Any() as T</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>三、为了看起来更形似，再增加如下两个方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 使其看起来像在数据库作用域中执行</span><br><span class="line">fun database(init: Sql.()-&gt;Unit) &#123;</span><br><span class="line">    init.invoke(Sql.get())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 因为infix限制，参数不能直接使用可变参数。因此，我们增加这个方法使参数组装看起来更自然</span><br><span class="line">fun columns(vararg columns: String): ColumnBuilder &#123;</span><br><span class="line">    return ColumnBuilder(columns)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，就是见证奇迹的时刻！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    database &#123;</span><br><span class="line">        (select (columns(&quot;*&quot;)) from User::class.java where &quot;age &gt; 18&quot;).query()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出结果：</span><br><span class="line">执行SQL查询：select * from User where age &gt; 18</span><br></pre></td></tr></table></figure></p>
<p>为了方便大家查看，我们提取完整执行代码段与SQL语句对比：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select          *       from User             where  age &gt; 18</span><br><span class="line">select  (columns(&quot;*&quot;))  from User::class.java where &quot;age &gt; 18&quot;</span><br></pre></td></tr></table></figure></p>
<p>神奇吗？<br>至此，我们就可以直接在代码中愉快地使用类似SQL语句的方式进行方法调用了。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本篇文章从操作符重载实用的角度讲解了操作符重载的所有相关知识。如文章开头所说，操作符重载是一把双刃剑。用得好事半功倍，用不好事倍功半。因此，我给大家的建议是：使用的时候一定要保证能够自圆其说，简单来说，就是自然。我认为相对于古老的语言C++来说，Kotlin语言操作符重载的设计是非常棒的。如果你知道自己在做什么，我非常推荐你在生产环境中使用操作符重载来简化操作。</p>
<p>本篇文章例子代码点这里：<a href="https://github.com/yuanhoujun/kotlin-samples" target="_blank" rel="noopener">kotlin-samples</a></p>
<hr>
<p>我是欧阳锋，一个热爱Kotlin语言编程的学生。如果你喜欢我的文章，请在文章下方留下你爱的印记。如果你不喜欢我的文章，请先喜欢上我的文章。然后再留下爱的印记！</p>
<p>下次文章再见，拜拜！</p>
<hr>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Android/">Android</a> <a class="tag tag--primary tag--small t-link" href="/tags/Kotlin/">Kotlin</a> <a class="tag tag--primary tag--small t-link" href="/tags/infix/">infix</a> <a class="tag tag--primary tag--small t-link" href="/tags/操作符/">操作符</a> <a class="tag tag--primary tag--small t-link" href="/tags/重载/">重载</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/02/15/about ouyangfeng/2017年终总结/"
                    data-tooltip="2017年终总结"
                    aria-label="上一篇: 2017年终总结"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/02/01/develop tools/关于Git，你真的学会了吗？/"
                    data-tooltip="关于Git，你真的学会了吗？"
                    aria-label="下一篇: 关于Git，你真的学会了吗？"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/&amp;title=Kotlin 操作符重载及中缀调用"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/"
                    title="分享到 Qzone"
                    aria-label="分享到 Qzone"
                >
                    <i class="fa fa-star" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="KPSM" sourceid="2018/02/06/kotlin/操作符重载及中缀调用/" appid="kp0000QPGPNP83"></div>
<script type="text/javascript" src="https://cdn.kuaiping.yhdm360.com/pub/common/js/kp.js"></script>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 欧阳锋工作室. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/02/15/about ouyangfeng/2017年终总结/"
                    data-tooltip="2017年终总结"
                    aria-label="上一篇: 2017年终总结"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/02/01/develop tools/关于Git，你真的学会了吗？/"
                    data-tooltip="关于Git，你真的学会了吗？"
                    aria-label="下一篇: 关于Git，你真的学会了吗？"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/&amp;title=Kotlin 操作符重载及中缀调用"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/"
                    title="分享到 Qzone"
                    aria-label="分享到 Qzone"
                >
                    <i class="fa fa-star" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://connect.qq.com/widget/shareqq/index.html?url=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/&amp;title=Kotlin 操作符重载及中缀调用"
                        aria-label="分享到 QQ"
                    >
                        <i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://youngfeng.com/2018/02/06/kotlin/操作符重载及中缀调用/"
                        aria-label="分享到 Qzone"
                    >
                        <i class="fa fa-star" aria-hidden="true"></i><span>分享到 Qzone</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpeg" alt="作者的图片"/>
        
            <h4 id="about-card-name">欧阳锋工作室</h4>
        
            <div id="about-card-bio"><p>Stay hungry, stay foolish</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>深圳一行代码科技有限公司创始人</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                广东深圳
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-uxpinu5umcabfr9aiy0uhzftnioszmvauq3qgkh8evzewnqgit0fhssjlsfq.min.js"></script>
<!--SCRIPTS END-->


    




    </body>
</html>
